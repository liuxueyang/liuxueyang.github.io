<!DOCTYPE html>
<html lang="zh-TW">
<head>
<!-- 2018-11-29 Thu 22:20 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Welcom to Lisp</title>
<meta name="generator" content="Org mode">
<meta name="author" content="liuxueyang">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
 <link rel='stylesheet' title='Standard' href='/views/css/worg.css' type='text/css' />
 <link rel='alternate stylesheet' title='Zenburn' href='/views/css/worg-zenburn.css' type='text/css' />
 <link rel='alternate stylesheet' title='Classic' href='/views/css/worg-classic.css' type='text/css' />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src='https://www.googletagmanager.com/gtag/js?id=UA-123066567-1'></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-123066567-1');
</script>

<link rel='apple-touch-icon' sizes='57x57' href='./images/favicon/apple-icon-57x57.png'>
<link rel='apple-touch-icon' sizes='60x60' href='./images/favicon/apple-icon-60x60.png'>
<link rel='apple-touch-icon' sizes='72x72' href='./images/favicon/apple-icon-72x72.png'>
<link rel='apple-touch-icon' sizes='76x76' href='./images/favicon/apple-icon-76x76.png'>
<link rel='apple-touch-icon' sizes='114x114' href='./images/favicon/apple-icon-114x114.png'>
<link rel='apple-touch-icon' sizes='120x120' href='./images/favicon/apple-icon-120x120.png'>
<link rel='apple-touch-icon' sizes='144x144' href='./images/favicon/apple-icon-144x144.png'>
<link rel='apple-touch-icon' sizes='152x152' href='./images/favicon/apple-icon-152x152.png'>
<link rel='apple-touch-icon' sizes='180x180' href='./images/favicon/apple-icon-180x180.png'>
<link rel='icon' type='image/png' sizes='192x192'  href='./images/favicon/android-icon-192x192.png'>
<link rel='icon' type='image/png' sizes='32x32' href='./images/favicon/favicon-32x32.png'>
<link rel='icon' type='image/png' sizes='96x96' href='./images/favicon/favicon-96x96.png'>
<link rel='icon' type='image/png' sizes='16x16' href='./images/favicon/favicon-16x16.png'>
<link rel='manifest' href='./images/favicon/manifest.json'>
<meta name='msapplication-TileColor' content='#ffffff'>
<meta name='msapplication-TileImage' content='/ms-icon-144x144.png'>
<meta name='theme-color' content='#ffffff'>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="javascript:history.back()"> 返回 </a>
 |
 <a accesskey="H" href="/"> 主頁 </a>
</div><div id="content">
<header>
<h1 class="title">Welcom to Lisp</h1>
</header><nav id="table-of-contents">
<h2>&#30446;&#37636;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org7f079d3">1. <span class="done DONE">DONE</span> Form</a></li>
<li><a href="#orgcd2f5b3">2. <span class="done DONE">DONE</span> Evaluation</a></li>
<li><a href="#orgf104f8e">3. <span class="done DONE">DONE</span> Data</a></li>
<li><a href="#org129df37">4. <span class="done DONE">DONE</span> List Operations</a></li>
<li><a href="#org596841d">5. <span class="done DONE">DONE</span> Truth</a></li>
<li><a href="#org3e062fd">6. <span class="done DONE">DONE</span> Functions</a></li>
<li><a href="#orgd81da06">7. <span class="done DONE">DONE</span> Recursion</a></li>
<li><a href="#org738e618">8. <span class="done DONE">DONE</span> Reading Lisp</a></li>
<li><a href="#org78ac269">9. <span class="done DONE">DONE</span> Input and Output</a></li>
<li><a href="#org801aa43">10. <span class="done DONE">DONE</span> Variables</a></li>
<li><a href="#org2cc9e36">11. <span class="done DONE">DONE</span> Assignment</a></li>
<li><a href="#org0566093">12. <span class="done DONE">DONE</span> Functional Programming</a></li>
<li><a href="#orgad8ddcd">13. <span class="done DONE">DONE</span> Iteration</a></li>
<li><a href="#org87f951c">14. <span class="done DONE">DONE</span> Functions as Objects</a></li>
<li><a href="#orge8f9908">15. <span class="done DONE">DONE</span> Types</a></li>
<li><a href="#orgf1809bd">16. <span class="done DONE">DONE</span> Looking Forward</a></li>
<li><a href="#org8d923f8">17. <span class="done DONE">DONE</span> Exercises</a>
<ul>
<li><a href="#org1ca2dc0">17.1. Problem 2</a></li>
<li><a href="#org31cf9eb">17.2. Problem 3</a></li>
<li><a href="#org6f3b408">17.3. Problem 4</a></li>
<li><a href="#org62d0310">17.4. Problem 5</a>
<ul>
<li><a href="#org51705a3">17.4.1. Problem a</a></li>
<li><a href="#org84c750a">17.4.2. Problem b</a></li>
</ul>
</li>
<li><a href="#org5b11716">17.5. <span class="done DONE">DONE</span> Problem 6</a>
<ul>
<li><a href="#org64dc294">17.5.1. Problem a</a></li>
<li><a href="#org2cd23a0">17.5.2. Problem b</a></li>
<li><a href="#orgba2abe8">17.5.3. Problem c</a></li>
</ul>
</li>
<li><a href="#org71e7d13">17.6. <span class="done DONE">DONE</span> Problem 7</a></li>
<li><a href="#org218855d">17.7. <span class="done DONE">DONE</span> Problem 8</a>
<ul>
<li><a href="#orgacfb584">17.7.1. Problem a</a></li>
<li><a href="#org32e9c37">17.7.2. Problem b</a></li>
</ul>
</li>
<li><a href="#orgd8962d4">17.8. <span class="done DONE">DONE</span> Problem 9</a>
<ul>
<li><a href="#orgfcc805f">17.8.1. Problem a</a></li>
<li><a href="#org6e89a75">17.8.2. Problem b</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
<div id="outline-container-org7f079d3" class="outline-2">
<h2 id="org7f079d3"><span class="section-number-2">1</span> <span class="done DONE">DONE</span> Form</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-19 Sun 14:19]</span></span></li>
</ul>
<p>
在數學中使用的加號 <code>+</code> 有兩個參數，分別在左右兩邊。在 Lisp 中採用前綴表達式，好處是即使 <code>+</code> 有多個參數，也只需要寫一次 <code>+</code> ，只需要用括號來標記表達式的開始和結束即可：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>+ 1 2 3 4<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Lisp 表達式只有兩種：原子「atom」、列表「list」。像 C 一類語言的語法就複雜很多：算數表達式使用中綴形式、函數調用使用前綴形式、函數參數用逗號分隔、表達式之間用分號分隔、代碼塊用大括號分隔等等。Lisp 相比之下語法形式顯得極其簡單，用一種形式來表達所有的這些概念。
</p>
</div>
</div>

<div id="outline-container-orgcd2f5b3" class="outline-2">
<h2 id="orgcd2f5b3"><span class="section-number-2">2</span> <span class="done DONE">DONE</span> Evaluation</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-19 Sun 15:45]</span></span></li>
</ul>
<p>
<code>+</code> 這個操作符其實是一個函數。所以下面這個表達式其實是一個函數調用：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>+ 1 2<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
在 Lisp 中，並不是所有的操作符都是函數，但是大部分是。
</p>

<p>
Lisp 的 <b>求值規則</b> 很簡單：
</p>

<ol class="org-ol">
<li>對參數按照從左到右的順序進行求值；</li>
<li>把參數的求值結果傳遞給函數；</li>
<li>函數的返回結果作爲這個表達式的值。</li>
</ol>

<p>
<code>quote</code> 這個操作符不遵守 Lisp 的求值規則，它是一個 *特殊操作符*「special
operator」，接受一個參數，並且按照參數的原樣返回它。作用是使得表達式不被 Lisp 求值。 <code>quote</code> 有一個簡寫形式： <code>'</code> 。
</p>
</div>
</div>

<div id="outline-container-orgf104f8e" class="outline-2">
<h2 id="orgf104f8e"><span class="section-number-2">3</span> <span class="done DONE">DONE</span> Data</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-19 Sun 16:48]</span></span></li>
</ul>
<p>
有幾種數據類型：
</p>

<ol class="org-ol">
<li>整數</li>
<li>字符串</li>
<li>符號「Symbol」</li>
<li>列表「List」</li>
</ol>

<p>
前兩種類型很常見。符號在 Lisp 內部全部用大寫表示「不管程序員使用的是小寫還是大寫，所以符號是不區分大小寫的」，符號的求值結果不一定是它本身，所以如果要表示一個符號，需要用 <code>quote</code> 阻止它求值：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; 'Painter
PAINTER
</pre>
</div>

<p>
如果要使用一個列表，而不是這個列表的求值結果，需要用 <code>quote</code> 阻止它求值，否則這個列表會被求值，當作一個函數調用：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; '<span class="org-rainbow-delimiters-depth-1">(</span>2 1 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>2 1 3<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
函數 <code>list</code> 可以用來構造列表，因爲 <code>list</code> 是一個函數，所以它的參數會先被求值：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>list 2 1 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>2 1 3<span class="org-rainbow-delimiters-depth-1">)</span>
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>equal <span class="org-rainbow-delimiters-depth-2">(</span>list 2 1 3<span class="org-rainbow-delimiters-depth-2">)</span> '<span class="org-rainbow-delimiters-depth-2">(</span>2 1 3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
T
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>list <span class="org-rainbow-delimiters-depth-2">(</span>+ 1 3<span class="org-rainbow-delimiters-depth-2">)</span> 10<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>4 10<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
可以看出，Lisp 程序和數據都用列表來表達，也就是說 Lisp 程序可以很方便地生成 Lisp 程序，意味着 Lisp 程序員可以很方便地寫出生成 Lisp 程序的
Lisp 程序。
</p>

<p>
Lisp 中空列表有兩種等價的表達形式： <code>()</code> 和 <code>nil</code> ，其中 <code>nil</code> 是一個符號，可以對它進行求值，結果是它本身，以下幾種形式等價「符號不區分大小寫」：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; nil
NIL
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">()</span>
NIL
CL-USER&gt; '<span class="org-rainbow-delimiters-depth-1">()</span>
NIL
CL-USER&gt; 'nil
NIL
CL-USER&gt; Nil
NIL
CL-USER&gt; NiL
NIL
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>equal <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
T
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>equal <span class="org-rainbow-delimiters-depth-2">()</span> 'nil<span class="org-rainbow-delimiters-depth-1">)</span>
T
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>eq <span class="org-rainbow-delimiters-depth-2">()</span> 'nil<span class="org-rainbow-delimiters-depth-1">)</span>
T
</pre>
</div>
</div>
</div>

<div id="outline-container-org129df37" class="outline-2">
<h2 id="org129df37"><span class="section-number-2">4</span> <span class="done DONE">DONE</span> List Operations</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-19 Sun 17:04] </span></span> <br>
finish</li>
</ul>
<p>
<code>cons</code> 是構造列表的函數：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>cons 'a '<span class="org-rainbow-delimiters-depth-2">(</span>b c d<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>A B C D<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>car</code> 和 <code>cdr</code> 是最基本的從列表中提取元素的函數：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>car '<span class="org-rainbow-delimiters-depth-2">(</span>a b c d<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
A
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>cdr '<span class="org-rainbow-delimiters-depth-2">(</span>a b c d<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>B C D<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
三種方法取得列表的第三個元素：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>car <span class="org-rainbow-delimiters-depth-2">(</span>cdr <span class="org-rainbow-delimiters-depth-3">(</span>cdr '<span class="org-rainbow-delimiters-depth-4">(</span>1 2 3 4<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
3
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>third '<span class="org-rainbow-delimiters-depth-2">(</span>1 2 3 4<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
3
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>caddr '<span class="org-rainbow-delimiters-depth-2">(</span>1 2 3 4<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
3
</pre>
</div>
</div>
</div>

<div id="outline-container-org596841d" class="outline-2">
<h2 id="org596841d"><span class="section-number-2">5</span> <span class="done DONE">DONE</span> Truth</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 11:09]</span></span></li>
</ul>
<p>
<code>t</code> 是一個符號，在 Lisp 中它表示 Bool 真值。 <code>t</code> 的求值結果是它本身。
Lisp 中判斷返回 Bool 值的函數通常叫做 <code>predicate</code> ， <code>predicate</code> 的函數名字通常用=p= 結尾。
</p>

<p>
相對地， <code>nil</code> 在 Lisp 中用來表示 Bool 假值。
</p>

<p>
<code>null</code> 函數用來判斷參數是不是空列表， <code>not</code> 函數對 Bool 值取反。由於
<code>nil</code> 既可以作爲假值，也可以作爲空列表，所以 <code>null</code> 和 <code>not</code> 這兩個函數是等價的：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>null nil<span class="org-rainbow-delimiters-depth-1">)</span>
T
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>not nil<span class="org-rainbow-delimiters-depth-1">)</span>
T
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>not '<span class="org-rainbow-delimiters-depth-2">(</span>1 2 3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
NIL
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>null '<span class="org-rainbow-delimiters-depth-2">(</span>1 2 3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
NIL
</pre>
</div>

<p>
在 Lisp 中，任何非 <code>nil</code> 的值都代表真值。
</p>

<p>
<code>if</code> 是一個特殊操作符，它不是函數，因爲他不會對所有的參數立即求值。
</p>

<p>
<code>and</code> 和 <code>or</code> 也是兩個特殊操作符，有短路效果。事實上，它們是宏。
</p>
</div>
</div>

<div id="outline-container-org3e062fd" class="outline-2">
<h2 id="org3e062fd"><span class="section-number-2">6</span> <span class="done DONE">DONE</span> Functions</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 11:20]</span></span></li>
</ul>
<p>
Symbol 其實是名字，用來綁定到變量或者函數上。
</p>

<p>
定義函數：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">our-third</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>car <span class="org-rainbow-delimiters-depth-3">(</span>cdr <span class="org-rainbow-delimiters-depth-4">(</span>cdr lst<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd81da06" class="outline-2">
<h2 id="orgd81da06"><span class="section-number-2">7</span> <span class="done DONE">DONE</span> Recursion</h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 11:26]</span></span></li>
</ul>
<p>
不要把遞歸想像成一個機器，把它想像成一個過程、或者做事情的規則，就好理解了。
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">our-member</span> <span class="org-rainbow-delimiters-depth-2">(</span>obj lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>null lst<span class="org-rainbow-delimiters-depth-3">)</span>
      nil
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>eql obj <span class="org-rainbow-delimiters-depth-5">(</span>car lst<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          lst
          <span class="org-rainbow-delimiters-depth-4">(</span>our-member obj <span class="org-rainbow-delimiters-depth-5">(</span>cdr lst<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org738e618" class="outline-2">
<h2 id="org738e618"><span class="section-number-2">8</span> <span class="done DONE">DONE</span> Reading Lisp</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 11:37]</span></span></li>
</ul>
<p>
很多人覺得 Lisp 的括號很多，寫起來和讀起來很麻煩。其實 Lisp 程序員從來不會根據括號來判斷程序的結構，而是根據良好的縮進，同時依賴編輯器自動匹配括號的功能。
</p>

<p>
在紙上手寫程序的時候，完全可以不用寫括號，只需要保持良好的縮進就好。比如下面的程序段，雖然沒有括號，但卻是十分清晰的：
</p>

<div class="org-src-container">
<pre class="src src-lisp">defun our-member obj lst
  if null lst
      nil
      if eql obj car lst
          lst
          our-member obj cdr lst
</pre>
</div>
</div>
</div>

<div id="outline-container-org78ac269" class="outline-2">
<h2 id="org78ac269"><span class="section-number-2">9</span> <span class="done DONE">DONE</span> Input and Output</h2>
<div class="outline-text-2" id="text-9">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 11:47]</span></span></li>
</ul>
<p>
輸出函數： <code>FORMAT</code>
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>format t <span class="org-string">"~a plus ~a equas ~a."</span> 3 4 <span class="org-rainbow-delimiters-depth-2">(</span>+ 3 4<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
3 plus 4 equas 7.
NIL
</pre>
</div>

<p>
輸入函數： <code>READ</code>
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">askem</span> <span class="org-rainbow-delimiters-depth-2">(</span>string<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>format t <span class="org-string">"~a"</span> string<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>read<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>READ</code> 其實是一個 parser，它可以讀取並且解析列表，然後返回 Lisp 對象。
</p>

<p>
函數體有多個表達式的時候，返回值是最後一個表達式的值。
</p>

<p>
輸出是一種副作用。
</p>

<p>
當編寫無副作用的程序的時候，函數體就只能包含一個表達式。因爲如果有多個表達式，每個表達式都沒有副作用，那麼其實對它們求值是沒有意義的。
</p>
</div>
</div>
<div id="outline-container-org801aa43" class="outline-2">
<h2 id="org801aa43"><span class="section-number-2">10</span> <span class="done DONE">DONE</span> Variables</h2>
<div class="outline-text-2" id="text-10">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 14:57]</span></span></li>
</ul>
<p>
<code>let</code> 操作符定義局部變量：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>x 1<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>y 2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>+ x y<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
再如：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">ask-number</span> <span class="org-rainbow-delimiters-depth-2">()</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>format t <span class="org-string">"Please enter a number. "</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>x <span class="org-rainbow-delimiters-depth-5">(</span>read<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>numberp x<span class="org-rainbow-delimiters-depth-4">)</span>
        x
        <span class="org-rainbow-delimiters-depth-4">(</span>ask-number<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>ask-number<span class="org-rainbow-delimiters-depth-1">)</span>
Please enter a number. a
Please enter a number. <span class="org-rainbow-delimiters-depth-1">(</span>1 2 3<span class="org-rainbow-delimiters-depth-1">)</span>
Please enter a number. 2

2
</pre>
</div>

<p>
定義全局變量：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defparameter</span> <span class="org-variable-name">*glob*</span> 99<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
習慣上全局變量會在變量名字的開頭和結尾加上 <code>*</code> 。
</p>

<p>
定義全局常量：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defconstant</span> <span class="org-variable-name">limit</span> <span class="org-rainbow-delimiters-depth-2">(</span>+ *glob* 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
沒有必要給全局的常量的名字首尾加上 <code>*</code> ，因爲全局常量的名字不能夠被覆蓋。
</p>

<p>
檢查一個符號是不是已經被全局變量或者常量綁定：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>boundp '*glob*<span class="org-rainbow-delimiters-depth-1">)</span>
T
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>boundp 'limit<span class="org-rainbow-delimiters-depth-1">)</span>
T
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>boundp 'glob<span class="org-rainbow-delimiters-depth-1">)</span>
NIL
</pre>
</div>
</div>
</div>

<div id="outline-container-org2cc9e36" class="outline-2">
<h2 id="org2cc9e36"><span class="section-number-2">11</span> <span class="done DONE">DONE</span> Assignment</h2>
<div class="outline-text-2" id="text-11">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 15:40]</span></span></li>
</ul>
<p>
<code>SETF</code> 这个操作符用来给变量赋值。如果不是被赋值的对象不是局部变量，那么会隐式地创建一个全局变量。
</p>

<p>
<code>SETF</code> 的第一个参数可以是表达式：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>setf x '<span class="org-rainbow-delimiters-depth-2">(</span>a b c d<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>setf <span class="org-rainbow-delimiters-depth-2">(</span>car x<span class="org-rainbow-delimiters-depth-2">)</span> 'e<span class="org-rainbow-delimiters-depth-1">)</span>

CL-USER&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span>E B C D<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>SETF</code> 接受偶数个参数：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>set x 1
     y 2
     z 3<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0566093" class="outline-2">
<h2 id="org0566093"><span class="section-number-2">12</span> <span class="done DONE">DONE</span> Functional Programming</h2>
<div class="outline-text-2" id="text-12">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 16:51]</span></span></li>
</ul>
<p>
函數式編程的意思就是函數只做計算工作，沒有任何副作用，函數的返回值作爲函數的結果，同時函數不改變任何東西。
</p>

<p>
很多 Lisp 內置的函數都是函數式的，即它們不會改變參數，而會返回一個新的值作爲結果，比如 <code>REMOVE</code> 函數：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>setf lst '<span class="org-rainbow-delimiters-depth-2">(</span>a b c a d e<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>A B C A D E<span class="org-rainbow-delimiters-depth-1">)</span>
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>remove 'a lst<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>B C D E<span class="org-rainbow-delimiters-depth-1">)</span>
CL-USER&gt; lst 
<span class="org-rainbow-delimiters-depth-1">(</span>A B C A D E<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
函數式編程的一個優點是，你能夠交互式地進行測試，你可以寫一個函數就測試一個函數，如果它能夠返回正確的值，你就更有自信它是正確的，因爲這個函數不依賴于外部環境，針對特定的輸入，總是返回同樣的輸出。同時，要做修改也很簡單，只需要修改相關的函數內部實現就好，不用考慮新的修改會對程序的其它地方有什麼影響。
</p>
</div>
</div>

<div id="outline-container-orgad8ddcd" class="outline-2">
<h2 id="orgad8ddcd"><span class="section-number-2">13</span> <span class="done DONE">DONE</span> Iteration</h2>
<div class="outline-text-2" id="text-13">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 19:15]</span></span></li>
</ul>
<p>
<code>do</code> 這個宏用來構造循環：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">show-squares</span> <span class="org-rainbow-delimiters-depth-2">(</span>start end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">do</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>i start <span class="org-rainbow-delimiters-depth-5">(</span>+ 1 i<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>&gt; i end<span class="org-rainbow-delimiters-depth-4">)</span> 'done<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>format t <span class="org-string">"~a ~a~%"</span> i <span class="org-rainbow-delimiters-depth-4">(</span>* i i<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>show-squares 2 5<span class="org-rainbow-delimiters-depth-1">)</span>
2 4
3 9
4 16
5 25
DONE
</pre>
</div>

<p>
用遞歸重新重寫：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">show-squares-rec</span> <span class="org-rainbow-delimiters-depth-2">(</span>start end<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>&gt; start end<span class="org-rainbow-delimiters-depth-3">)</span>
      'done
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>format t <span class="org-string">"~a ~a~%"</span> start <span class="org-rainbow-delimiters-depth-5">(</span>* start start<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>show-squares-rec <span class="org-rainbow-delimiters-depth-5">(</span>+ 1 start<span class="org-rainbow-delimiters-depth-5">)</span> end<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>show-squares-rec 2 5<span class="org-rainbow-delimiters-depth-1">)</span>
2 4
3 9
4 16
5 25
DONE
</pre>
</div>

<p>
如果要循環列表，可以使用 <code>DOLIST</code> ：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">our-length</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>len 0<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-4">(</span>x lst<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span>setf len <span class="org-rainbow-delimiters-depth-5">(</span>+ 1 len<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    len<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>our-length '<span class="org-rainbow-delimiters-depth-2">(</span>2 3 10<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
3
</pre>
</div>

<p>
用遞歸重寫：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">our-length-rec</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>null lst<span class="org-rainbow-delimiters-depth-3">)</span>
      0
      <span class="org-rainbow-delimiters-depth-3">(</span>+ 1 <span class="org-rainbow-delimiters-depth-4">(</span>our-length-rec <span class="org-rainbow-delimiters-depth-5">(</span>cdr lst<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>our-length-rec '<span class="org-rainbow-delimiters-depth-2">(</span>2 3 10<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
3
</pre>
</div>
</div>
</div>

<div id="outline-container-org87f951c" class="outline-2">
<h2 id="org87f951c"><span class="section-number-2">14</span> <span class="done DONE">DONE</span> Functions as Objects</h2>
<div class="outline-text-2" id="text-14">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 21:26]</span></span></li>
</ul>
<p>
在 Lisp 中，函數是一種對象，就像列表和符號一樣。
</p>

<p>
<code>FUNCTION</code> 是一個特殊操作符。可以根據函數名字得到對應的函數對象：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>function +<span class="org-rainbow-delimiters-depth-1">)</span>
#&lt;FUNCTION +&gt;
</pre>
</div>

<p>
就像 <code>QUOTE</code> 的別名是 <code>'</code> 一樣， <code>FUNCTION</code> 也有一個別名： <code>#'</code> ：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; #'+
#&lt;FUNCTION +&gt;
</pre>
</div>

<p>
就像別的對象一樣，函數也可以作爲參數傳遞給別的函數。
</p>

<p>
<code>APPLY</code> 這個函數接受一個函數對象和一個列表，返回把列表中的值作爲參數傳遞給第一個函數參數得到的返回值：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>apply #'+ '<span class="org-rainbow-delimiters-depth-2">(</span>2 3 10<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
15
</pre>
</div>

<p>
也可以接受任意多個參數，要求最後一個參數是列表：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>apply #'+ 1 2 '<span class="org-rainbow-delimiters-depth-2">(</span>2 3 10<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
18
</pre>
</div>

<p>
<code>FUNCALL</code> 這個函數類似，只不過它不需要把參數包裝在列表裏：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>funcall #'+ 1 2 3<span class="org-rainbow-delimiters-depth-1">)</span>
6
</pre>
</div>

<p>
<code>DEFUN</code> 這個宏創建了一個函數，並且給這個函數命名。就像我們可以直接使用數字的字面量一樣，我們也可以使用函數字面量，使用 <code>lambda</code> 表達式，比如下面這個 <code>lambda</code> 表達式表示一個把兩個數字相加的函數：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>x y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>+ x y<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<code>lambda</code> 表達式可以被當作是函數的名字，像平常的函數名字一樣， <code>lambda</code>
表達式可以作爲列表的第一個元素，以下是一個函數調用：
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>x y<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>+ x y<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
 2 3<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
同樣，要得到函數對象，在前面追加 <code>#'</code> 或者使用別名 <code>function</code> ：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; #'<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-2">(</span>x y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span>+ x y<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
#&lt;FUNCTION <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">LAMBDA</span> <span class="org-rainbow-delimiters-depth-2">(</span>X Y<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> {1003240D4B}&gt;
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>function <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>x y<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>+ x y<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
#&lt;FUNCTION <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">LAMBDA</span> <span class="org-rainbow-delimiters-depth-2">(</span>X Y<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> {1003240DEB}&gt;
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>funcall #'<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">lambda</span> <span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">(</span>+ x 100<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> 100<span class="org-rainbow-delimiters-depth-1">)</span>
200
</pre>
</div>
</div>
</div>

<div id="outline-container-orge8f9908" class="outline-2">
<h2 id="orge8f9908"><span class="section-number-2">15</span> <span class="done DONE">DONE</span> Types</h2>
<div class="outline-text-2" id="text-15">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 21:33]</span></span></li>
</ul>
<p>
在 Lisp 中，變量沒有類型，值有類型，變量可以綁定任何類型的值。可以認爲每個 Lisp 對象都有一個標籤表明它的類型。
</p>

<p>
Common Lisp 的類型系統裏面，所有類型都是 <code>t</code> 的子類。
</p>

<p>
函數 <code>typep</code> 可以判別一個值是不是指定的類型：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>typep 27 'integer<span class="org-rainbow-delimiters-depth-1">)</span>
T
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf1809bd" class="outline-2">
<h2 id="orgf1809bd"><span class="section-number-2">16</span> <span class="done DONE">DONE</span> Looking Forward</h2>
<div class="outline-text-2" id="text-16">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 21:58]</span></span></li>
</ul>
<p>
Lisp 可以改變程序員思考編程的方式：與其使用某種編程語言寫程序，不如改進這門語言，使得它更適合你的程序。
</p>
</div>
</div>
<div id="outline-container-org8d923f8" class="outline-2">
<h2 id="org8d923f8"><span class="section-number-2">17</span> <span class="done DONE">DONE</span> Exercises</h2>
<div class="outline-text-2" id="text-17">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 23:30]</span></span></li>
</ul>
</div>
<div id="outline-container-org1ca2dc0" class="outline-3">
<h3 id="org1ca2dc0"><span class="section-number-3">17.1</span> Problem 2</h3>
<div class="outline-text-3" id="text-17-1">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>cons 'a <span class="org-rainbow-delimiters-depth-2">(</span>cons 'b <span class="org-rainbow-delimiters-depth-3">(</span>cons 'c nil<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cons 'a <span class="org-rainbow-delimiters-depth-2">(</span>cons 'b '<span class="org-rainbow-delimiters-depth-3">(</span>c<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cons 'a '<span class="org-rainbow-delimiters-depth-2">(</span>b c<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org31cf9eb" class="outline-3">
<h3 id="org31cf9eb"><span class="section-number-3">17.2</span> Problem 3</h3>
<div class="outline-text-3" id="text-17-2">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">our-fourth</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>car <span class="org-rainbow-delimiters-depth-3">(</span>cdr <span class="org-rainbow-delimiters-depth-4">(</span>cdr <span class="org-rainbow-delimiters-depth-5">(</span>cdr lst<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6f3b408" class="outline-3">
<h3 id="org6f3b408"><span class="section-number-3">17.3</span> Problem 4</h3>
<div class="outline-text-3" id="text-17-3">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">greater-two</span> <span class="org-rainbow-delimiters-depth-2">(</span>x y<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>&gt; x y<span class="org-rainbow-delimiters-depth-3">)</span>
      x
      y<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org62d0310" class="outline-3">
<h3 id="org62d0310"><span class="section-number-3">17.4</span> Problem 5</h3>
<div class="outline-text-3" id="text-17-4">
</div>
<div id="outline-container-org51705a3" class="outline-4">
<h4 id="org51705a3"><span class="section-number-4">17.4.1</span> Problem a</h4>
<div class="outline-text-4" id="text-17-4-1">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">enigma</span> <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>and <span class="org-rainbow-delimiters-depth-3">(</span>not <span class="org-rainbow-delimiters-depth-4">(</span>null x<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
       <span class="org-rainbow-delimiters-depth-3">(</span>or <span class="org-rainbow-delimiters-depth-4">(</span>null <span class="org-rainbow-delimiters-depth-5">(</span>car x<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
           <span class="org-rainbow-delimiters-depth-4">(</span>enigma <span class="org-rainbow-delimiters-depth-5">(</span>cdr x<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>     
</pre>
</div>

<p>
這個函數的作用是查看一個列表裏面是否包含 <code>nil</code> 。
</p>
</div>
</div>
<div id="outline-container-org84c750a" class="outline-4">
<h4 id="org84c750a"><span class="section-number-4">17.4.2</span> Problem b</h4>
<div class="outline-text-4" id="text-17-4-2">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">mystery</span> <span class="org-rainbow-delimiters-depth-2">(</span>x y<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>null y<span class="org-rainbow-delimiters-depth-3">)</span>
      nil
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>eql <span class="org-rainbow-delimiters-depth-5">(</span>car y<span class="org-rainbow-delimiters-depth-5">)</span> x<span class="org-rainbow-delimiters-depth-4">)</span>
          0
          <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-5">(</span><span class="org-rainbow-delimiters-depth-6">(</span>z <span class="org-rainbow-delimiters-depth-7">(</span>mystery x <span class="org-rainbow-delimiters-depth-8">(</span>cdr y<span class="org-rainbow-delimiters-depth-8">)</span><span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>and z <span class="org-rainbow-delimiters-depth-6">(</span>+ z 1<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>     
</pre>
</div>

<p>
這個函數的作用是在 y 中找 x 的下標：
</p>

<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>mystery 'a '<span class="org-rainbow-delimiters-depth-2">(</span>1 2 3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
NIL
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>mystery 'a '<span class="org-rainbow-delimiters-depth-2">(</span>1 2 a 3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
2
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>mystery 'a '<span class="org-rainbow-delimiters-depth-2">(</span>1 a 2 3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
1
CL-USER&gt; <span class="org-rainbow-delimiters-depth-1">(</span>mystery 'a '<span class="org-rainbow-delimiters-depth-2">(</span>2 3 1 a<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
3     
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org5b11716" class="outline-3">
<h3 id="org5b11716"><span class="section-number-3">17.5</span> <span class="done DONE">DONE</span> Problem 6</h3>
<div class="outline-text-3" id="text-17-5">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 23:04]</span></span></li>
</ul>
</div>
<div id="outline-container-org64dc294" class="outline-4">
<h4 id="org64dc294"><span class="section-number-4">17.5.1</span> Problem a</h4>
<div class="outline-text-4" id="text-17-5-1">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>car <span class="org-rainbow-delimiters-depth-2">(</span>car <span class="org-rainbow-delimiters-depth-3">(</span>cdr '<span class="org-rainbow-delimiters-depth-4">(</span>a <span class="org-rainbow-delimiters-depth-5">(</span>b c<span class="org-rainbow-delimiters-depth-5">)</span> d<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2cd23a0" class="outline-4">
<h4 id="org2cd23a0"><span class="section-number-4">17.5.2</span> Problem b</h4>
<div class="outline-text-4" id="text-17-5-2">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>or 13 <span class="org-rainbow-delimiters-depth-2">(</span>/ 1 0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgba2abe8" class="outline-4">
<h4 id="orgba2abe8"><span class="section-number-4">17.5.3</span> Problem c</h4>
<div class="outline-text-4" id="text-17-5-3">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span>apply #'list 1 nil<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org71e7d13" class="outline-3">
<h3 id="org71e7d13"><span class="section-number-3">17.6</span> <span class="done DONE">DONE</span> Problem 7</h3>
<div class="outline-text-3" id="text-17-6">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 23:13]</span></span></li>
</ul>
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">contain-list</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>null lst<span class="org-rainbow-delimiters-depth-3">)</span>
      nil
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>listp <span class="org-rainbow-delimiters-depth-5">(</span>car lst<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          t
          <span class="org-rainbow-delimiters-depth-4">(</span>contain-list <span class="org-rainbow-delimiters-depth-5">(</span>cdr lst<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org218855d" class="outline-3">
<h3 id="org218855d"><span class="section-number-3">17.7</span> <span class="done DONE">DONE</span> Problem 8</h3>
<div class="outline-text-3" id="text-17-7">
<ul class="org-ul">
<li>State "DONE"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 23:23]</span></span></li>
</ul>
</div>
<div id="outline-container-orgacfb584" class="outline-4">
<h4 id="orgacfb584"><span class="section-number-4">17.7.1</span> Problem a</h4>
<div class="outline-text-4" id="text-17-7-1">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">print-dots</span> <span class="org-rainbow-delimiters-depth-2">(</span>n<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">do</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>i 0 <span class="org-rainbow-delimiters-depth-5">(</span>+ i 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>equal i n<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-4">(</span>format t <span class="org-string">"~%"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span>format t <span class="org-string">"."</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">print-dots-rec</span> <span class="org-rainbow-delimiters-depth-2">(</span>n<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>zerop n<span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span>format t <span class="org-string">"~%"</span><span class="org-rainbow-delimiters-depth-3">)</span>
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">progn</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>format t <span class="org-string">"."</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span>print-dots-rec <span class="org-rainbow-delimiters-depth-5">(</span>- n 1<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org32e9c37" class="outline-4">
<h4 id="org32e9c37"><span class="section-number-4">17.7.2</span> Problem b</h4>
<div class="outline-text-4" id="text-17-7-2">
<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">count-a</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span>cnt 0<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">dolist</span> <span class="org-rainbow-delimiters-depth-4">(</span>x lst<span class="org-rainbow-delimiters-depth-4">)</span>
      <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>equal x 'a<span class="org-rainbow-delimiters-depth-5">)</span>
          <span class="org-rainbow-delimiters-depth-5">(</span>setf cnt <span class="org-rainbow-delimiters-depth-6">(</span>+ 1 cnt<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
    cnt<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">count-a-rec</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>null lst<span class="org-rainbow-delimiters-depth-3">)</span>
      0
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-4">(</span>equal 'a <span class="org-rainbow-delimiters-depth-5">(</span>car lst<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>+ 1 <span class="org-rainbow-delimiters-depth-5">(</span>count-a-rec <span class="org-rainbow-delimiters-depth-6">(</span>cdr lst<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
          <span class="org-rainbow-delimiters-depth-4">(</span>count-a-rec <span class="org-rainbow-delimiters-depth-5">(</span>cdr lst<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd8962d4" class="outline-3">
<h3 id="orgd8962d4"><span class="section-number-3">17.8</span> <span class="done DONE">DONE</span> Problem 9</h3>
<div class="outline-text-3" id="text-17-8">
<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 23:29]</span></span></li>
<li>State "TODO"       from              <span class="timestamp-wrapper"><span class="timestamp">[2018-08-20 Mon 23:23]</span></span></li>
</ul>
</div>
<div id="outline-container-orgfcc805f" class="outline-4">
<h4 id="orgfcc805f"><span class="section-number-4">17.8.1</span> Problem a</h4>
<div class="outline-text-4" id="text-17-8-1">
<p>
原程序錯在 <code>remove</code> 不會改變原有列表。
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">summit</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>setf lst <span class="org-rainbow-delimiters-depth-3">(</span>remove nil lst<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span>apply #'+ lst<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6e89a75" class="outline-4">
<h4 id="org6e89a75"><span class="section-number-4">17.8.2</span> Problem b</h4>
<div class="outline-text-4" id="text-17-8-2">
<p>
原程序錯在沒有考慮參數是空列表的基本情況。
</p>

<div class="org-src-container">
<pre class="src src-lisp"><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">defun</span> <span class="org-function-name">summit-rec</span> <span class="org-rainbow-delimiters-depth-2">(</span>lst<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-3">(</span>null lst<span class="org-rainbow-delimiters-depth-3">)</span>
      0
      <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">let</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-rainbow-delimiters-depth-5">(</span>x <span class="org-rainbow-delimiters-depth-6">(</span>car lst<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-5">(</span>null x<span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>summit-rec <span class="org-rainbow-delimiters-depth-6">(</span>cdr lst<span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span>
            <span class="org-rainbow-delimiters-depth-5">(</span>+ x <span class="org-rainbow-delimiters-depth-6">(</span>summit-rec <span class="org-rainbow-delimiters-depth-7">(</span>cdr lst<span class="org-rainbow-delimiters-depth-7">)</span><span class="org-rainbow-delimiters-depth-6">)</span><span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

<br/>
<br/>
<p class='author'>Author: liuxueyang (<a href="mailto:liuxueyang457@gmail.com">liuxueyang457@gmail.com</a>)</p>
<p class='date'>Date: 2018-08-21 Tue 00:00</p>
<p class='creator'>Emacs 26.1 (Org mode 9.1.9)</p>
<p class='validation'><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>

<script>
var idcomments_acct = 'ab93a85474f166ce7e6c4b85791a447d';
var idcomments_post_id;
var idcomments_post_url;
</script>

 <div id='comments'>
  <div class='intense_debate' id='intense_debate_btn'
       onclick='intense_debate()'>点击加载评论
  </div>
  <div id='intense_debate_thread'></div>
  <span id='IDCommentsPostTitle' style='display:none'></span>
 </div>

 <script>
     let disqus_loaded = false;
     function intense_debate() {
         if (!disqus_loaded) {
             disqus_loaded = true;
             (function () {
                 var d = document, s = d.createElement('script');
                 s.src = 'https://www.intensedebate.com/js/genericCommentWrapperV2.js';
                 d.body.appendChild(s);
             })();
         }
         document.getElementById('intense_debate_btn').style.display = 'none';
         return false;
     }
 </script>
</div>
</body>
</html>
