<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Common Lisp," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Today, I read the book Land of Lisp.It is interesting to write a text adventure game.  First, there are some basic and useful functions. ##some useful functions  mapcar  This function takes another fu">
<meta name="keywords" content="Common Lisp">
<meta property="og:type" content="article">
<meta property="og:title" content="A Text Adventure Game by CommonLISP">
<meta property="og:url" content="liuxueyang.github.io/2014/06/01/a-text-adventure-game-by-commonlisp/index.html">
<meta property="og:site_name" content="黑历史">
<meta property="og:description" content="Today, I read the book Land of Lisp.It is interesting to write a text adventure game.  First, there are some basic and useful functions. ##some useful functions  mapcar  This function takes another fu">
<meta property="og:updated_time" content="2017-04-11T15:16:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A Text Adventure Game by CommonLISP">
<meta name="twitter:description" content="Today, I read the book Land of Lisp.It is interesting to write a text adventure game.  First, there are some basic and useful functions. ##some useful functions  mapcar  This function takes another fu">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="liuxueyang.github.io/2014/06/01/a-text-adventure-game-by-commonlisp/"/>





  <title> A Text Adventure Game by CommonLISP | 黑历史 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">黑历史</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2014/06/01/a-text-adventure-game-by-commonlisp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/drawing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                A Text Adventure Game by CommonLISP
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-06-01T20:23:29+08:00">
                2014-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Today, I read the book Land of Lisp.<br>It is interesting to write a text adventure game.</p>
<hr>
<p>First, there are some basic and useful functions.</p>
<p>##some useful functions</p>
<ol>
<li><p><code>mapcar</code></p>
<p> This function takes another function and a list, and then applies this function to every member of a list.This is an example:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">mapcar</span> #'sqrt '(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>))</div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>It will output a list contains the square root of each element. Besides, the code above is the same as:

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">mapcar</span> (<span class="name">function</span> car) '(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>))</div></pre></td></tr></table></figure>


Furthermore, there is a namespace problem here. For example:

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="name">let</span> ((<span class="name">car</span> <span class="string">"liuxueyang"</span>))</div><div class="line">	(<span class="name">mapcar</span> #'car '((foo bar) (fo ba))))</div></pre></td></tr></table></figure>


It will output (foo ba) as expected. Here are two &apos;car&apos;s. Because we prepended the second &apos;car&apos; with #&apos;, there is no confusion about which car we are talking about.

Common Lisp tracks function names differently from variable names. It has multiple namespaces, including one for variables and one for functions. However, in Scheme, there is only namespace for functions and variables.
</code></pre><ol>
<li><p><code>append</code></p>
<p> this function can join several lists into one big list:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">append</span> '(liu) '(xue) '(yang))</div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>It will output:

&gt;(liu xue yang)
</code></pre><ol>
<li><p><code>apply</code></p>
<p> Sometimes, I will confuse this function with the <code>mapcar</code>. You pass the <code>apply</code> a function and a list of objects, and it pretends that the items in the list are separate objects and passes them to the given function as such.</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">apply</span> #'append '((are) (you) (sad)))</div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>This will output:

&gt;(are you sad)
</code></pre><ol>
<li><p><code>assoc</code></p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="name">defparameter</span> *letter-list*</div><div class="line">	'((a (This is letter a))</div><div class="line">		(b (This is letter b))</div><div class="line">		(a (This is the second letter a))))</div><div class="line">(<span class="name">assoc</span> 'a *letter-list*)</div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>This wil output:

&gt;(a (This is letter a))

Notice that it will **ONLY** returns the first item it finds in a list. This is very useful in future. (such as when we push two objects into one list, we will only get the newer one as if we replace the old one with the newer one.)
</code></pre><ol>
<li><p><code>push</code> </p>
<p> the <code>push</code> command simply adds a new item to the front of a list variable’s list. For example:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="name">defparameter</span> *foo* '(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>))</div><div class="line">(<span class="name">push</span> <span class="number">73</span> *foo*)</div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>It will output:

&gt;(73 1 2 3)
</code></pre><ol>
<li><p><code>find</code></p>
<p> this function searches a list for an item, then return that found item. For example:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">find</span> <span class="number">1</span> '(<span class="number">4</span> <span class="number">5</span> <span class="number">1</span>))</div></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>It will output:

&gt;1

Besides, in Common Lisp, many functions have built-in freatures that can be accessed by passing in special parameters at the end of the function call. For example:

<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">find</span> 'y '((<span class="number">1</span> x) (<span class="number">2</span> y) (<span class="number">3</span> n)) <span class="symbol">:key</span> #'cadr)</div></pre></td></tr></table></figure>


It will output:

&gt;(2 Y)
</code></pre><p>##main program</p>
<p>This is the complete program. </p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">; this is a text adventory game.</span></div><div class="line"><span class="comment">; by Conrad Barski, M.D.</span></div><div class="line"></div><div class="line"><span class="comment">; describe these locations of the game</span></div><div class="line">(<span class="name">defparameter</span> *nodes*</div><div class="line">  '((living-room (you are in the living-room.</div><div class="line">                      a wizard is snoring loudly on the couch.))</div><div class="line">    (garden (you are in a beautiful garden.</div><div class="line">                 there is a well in front of you.))</div><div class="line">    (attic (you are in the attic.</div><div class="line">                there is a giant welding torch in the corner.))))</div><div class="line"></div><div class="line"><span class="comment">;describe each location and the paths of each of them</span></div><div class="line">(<span class="name">defparameter</span> *edges* '((living-room (garden west door)</div><div class="line">                                    (attic upstair ladder))</div><div class="line">                       (garden (living-room east door))</div><div class="line">                       (attic (living-room downstairs ladder))))</div><div class="line"></div><div class="line"><span class="comment">; a function to describe current location</span></div><div class="line">(<span class="name">defun</span> describe-location (<span class="name">location</span> nodes)</div><div class="line">  (<span class="name">cadr</span> (<span class="name">assoc</span> location nodes)))</div><div class="line"></div><div class="line"><span class="comment">; describe the path of a location</span></div><div class="line">(<span class="name">defun</span> describe-path (<span class="name">edge</span>)</div><div class="line">  `(there is a ,(caddr edge) goting ,(cadr edge) from here.))</div><div class="line"></div><div class="line"><span class="comment">; describe multipal paths of a location</span></div><div class="line">(<span class="name">defun</span> describe-paths (<span class="name">location</span> edges)</div><div class="line">  (<span class="name">apply</span> #'append (<span class="name">mapcar</span> #'describe-path (<span class="name">cdr</span> (<span class="name">assoc</span> location edges)))))</div><div class="line"></div><div class="line"><span class="comment">; describe objects</span></div><div class="line">(<span class="name">defparameter</span> *objects* '(whiskey bucket frog chain))</div><div class="line"></div><div class="line"><span class="comment">; describe locations of objects</span></div><div class="line">(<span class="name">defparameter</span> *object-locations*</div><div class="line">       '((whiskey living-room)</div><div class="line">         (bucket living-room)</div><div class="line">         (chain garden)</div><div class="line">         (frog garden)))</div><div class="line"></div><div class="line"><span class="comment">; list the object visible from a given location</span></div><div class="line">(<span class="name">defun</span> objects-at (<span class="name">loc</span> objs obj-locs)</div><div class="line">  (<span class="name">labels</span> ((<span class="name">at-loc-p</span> (<span class="name">obj</span>) (<span class="name">eq</span> loc (<span class="name">cadr</span> (<span class="name">assoc</span> obj obj-locs)))))</div><div class="line">    (<span class="name">remove-if-not</span> #'at-loc-p objs)))</div><div class="line"></div><div class="line"><span class="comment">; describe objects visible at a given location</span></div><div class="line">(<span class="name">defun</span> describe-objects (<span class="name">loc</span> objs obj-locs)</div><div class="line">  (<span class="name">labels</span> ((<span class="name">describe-obj</span> (<span class="name">obj</span>)</div><div class="line">             `(there is a ,obj on the floor.)))</div><div class="line">    (<span class="name">apply</span> #'append (<span class="name">mapcar</span> #'describe-obj (<span class="name">objects-at</span> loc objs obj-locs)))))</div><div class="line"></div><div class="line"><span class="comment">; define current location</span></div><div class="line">(<span class="name">defparameter</span> *location* 'living-room)</div><div class="line"></div><div class="line"><span class="comment">; start to look around</span></div><div class="line">(<span class="name">defun</span> look ()</div><div class="line">  (<span class="name">append</span> (<span class="name">describe-location</span> *location* *nodes*)</div><div class="line">          (<span class="name">describe-paths</span> *location* *edges*)</div><div class="line">          (<span class="name">describe-objects</span> *location* *objects* *object-locations*)))</div><div class="line"></div><div class="line"><span class="comment">; this function takes a direction and let me walk there</span></div><div class="line">(<span class="name">defun</span> walk (<span class="name">direction</span>)</div><div class="line">  (<span class="name">let</span> ((<span class="name">next</span> (<span class="name">find</span> direction (<span class="name">cdr</span> (<span class="name">assoc</span> *location* *edges*)) <span class="symbol">:key</span> #'cadr)))</div><div class="line">    (<span class="name">if</span> next</div><div class="line">      (<span class="name">progn</span> (<span class="name">setf</span> *location* (<span class="name">car</span> next))</div><div class="line">        (<span class="name">look</span>))</div><div class="line">      '(you can not go that way.))))</div><div class="line"></div><div class="line"><span class="comment">; pick up a object</span></div><div class="line">(<span class="name">defun</span> pickup (<span class="name">object</span>)</div><div class="line">  (<span class="name">cond</span> ((<span class="name">member</span> object (<span class="name">objects-at</span> *location* *objects* *object-locations*))</div><div class="line">         (<span class="name">push</span> (<span class="name">list</span> object 'body) *object-locations*)</div><div class="line">         `(you are now carrying the ,object))</div><div class="line">        (<span class="name">t</span> '(you cannot get that.))))</div><div class="line"></div><div class="line"><span class="comment">;see an inventory of objects I carry</span></div><div class="line">(<span class="name">defun</span> inventory ()</div><div class="line">  (<span class="name">cons</span> 'items- (<span class="name">objects-at</span> 'body *objects* *object-locations*)))</div><div class="line"></div><div class="line"><span class="comment">; this function add parentheses and quotes to what we input</span></div><div class="line">(<span class="name">defun</span> game-read ()</div><div class="line">  (<span class="name">let</span> ((<span class="name">cmd</span> (<span class="name">read-from-string</span> (<span class="name">concatenate</span> 'string <span class="string">"("</span> (<span class="name">read-line</span>) <span class="string">")"</span>))))</div><div class="line">    (<span class="name">flet</span> ((<span class="name">quote-it</span> (<span class="name">x</span>)</div><div class="line">             (<span class="name">list</span> 'quote x)))</div><div class="line">             (<span class="name">cons</span> (<span class="name">car</span> cmd) (<span class="name">mapcar</span> #'quote-it (<span class="name">cdr</span> cmd))))))</div><div class="line"></div><div class="line"><span class="comment">; define allowed commands</span></div><div class="line">(<span class="name">defparameter</span> *allowed-commands* '(look walk pickup inventory))</div><div class="line"></div><div class="line"><span class="comment">;call some function</span></div><div class="line">(<span class="name">defun</span> game-eval (<span class="name">sexp</span>)</div><div class="line">  (<span class="name">if</span> (<span class="name">member</span> (<span class="name">car</span> sexp) *allowed-commands*)</div><div class="line">    (<span class="name">eval</span> sexp)</div><div class="line">    '(I do not know that command.)))</div></pre></td></tr></table></figure>
<hr>
<p>##play the game</p>
<ol>
<li>function <code>look</code> describe where are you, the paths you can go and the objects around you.</li>
<li>function <code>walk</code> take a direction with a single quote as an argument. It will allows you go somewhere and print some error if there is no way in the direction.</li>
<li>function <code>pickup</code> will allow you to pick up some object.</li>
<li>function <code>inventory</code> will list those objects you have.</li>
</ol>
<p>This is an example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">(look)</div><div class="line"></div><div class="line">(YOU ARE IN THE LIVING-ROOM. A WIZARD IS SNORING LOUDLY ON THE COUCH. THERE IS A DOOR GOTING WEST FROM HERE. THERE IS A LADDER GOTING UPSTAIR FROM HERE. THERE IS A WHISKEY ON THE FLOOR. THERE IS A BUCKET ON THE FLOOR.)</div><div class="line"></div><div class="line">(walk &apos;west)</div><div class="line"></div><div class="line">(YOU ARE IN A BEAUTIFUL GARDEN. THERE IS A WELL IN FRONT OF YOU. THERE IS A DOOR GOTING EAST FROM HERE. THERE IS A FROG ON THE FLOOR. THERE IS A CHAIN ON THE FLOOR.)</div><div class="line"></div><div class="line">(pickup &apos;frog)</div><div class="line"></div><div class="line">(YOU ARE NOW CARRYING THE FROG)</div><div class="line"></div><div class="line">(inventory)</div><div class="line"></div><div class="line">(ITEMS- FROG)</div></pre></td></tr></table></figure>
<hr>
<p>I will try to add a custom text game interface which will make the game play more seamless for the player.</p>
<hr>
<p>##Add a Custom Interface to Our Game</p>
<p>###Some Functions about print and read</p>
<ol>
<li><p><code>print</code></p>
<p> This function uses to print something. For Example:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(<span class="name">print</span> '<span class="number">3</span>')</div><div class="line">(<span class="name">print</span> 'foo')</div><div class="line">(<span class="name">print</span> '<span class="string">"foo"</span>)</div><div class="line">(<span class="name">print</span> '#\a)</div></pre></td></tr></table></figure>
<p> It will output:</p>
<blockquote>
<p>3<br>FOO<br>“FOO”<br>‘#’\A  (does not include single quote.)</p>
</blockquote>
<p> Note that this function will place a space character at the end of the printed value and start a new line before print another value.</p>
</li>
<li><p><code>princ</code></p>
<p> This function does less than <code>print</code>. It will print value as it was. For example:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(<span class="name">progn</span> (<span class="name">prin1</span> <span class="string">"This"</span>)</div><div class="line">    (<span class="name">prin1</span> <span class="string">"is"</span>)</div><div class="line">    (<span class="name">prin1</span> <span class="string">"a"</span>)</div><div class="line">    (<span class="name">prin1</span> <span class="string">"test"</span>))</div></pre></td></tr></table></figure>
<p> It will output:</p>
<blockquote>
<p>“This””is””a””test”</p>
</blockquote>
</li>
<li><p><code>read</code></p>
<p> read something from input. eg:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="name">defun</span> add-one ()</div><div class="line">    (<span class="name">print</span> <span class="string">"Enter a value"</span>)</div><div class="line">    (<span class="name">let</span> ((<span class="name">num</span> (<span class="name">read</span>)))</div><div class="line">        (<span class="name">print</span> <span class="string">"When I add one I get"</span>)</div><div class="line">        (<span class="name">print</span> (<span class="name">+</span> num <span class="number">1</span>))))</div></pre></td></tr></table></figure>
<p> When we run this function:</p>
<blockquote>
<p>(add-one)<br>“Enter a value”<br>3<br>“When I add one I get”<br>4</p>
</blockquote>
</li>
<li><p><code>read-line</code></p>
<p> This command captures and returns all the text entered until the ENTER key is pessed, without any fuss.</p>
</li>
<li><p><code>eval</code></p>
<p> This command can execute some data as if it were a piece  of code. eg:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="name">defparameter</span> *foo* '(+ <span class="number">4</span> <span class="number">5</span>))</div><div class="line">(<span class="name">eval</span> *foo*)</div></pre></td></tr></table></figure>
<p> It will output:</p>
<blockquote>
<p>9</p>
</blockquote>
</li>
<li><p><code>concatenate</code></p>
<p> It can be used for concatenating strings together. eg:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">concatenate</span> 'string <span class="string">"("</span> (<span class="name">read-ling</span>) <span class="string">")"</span>)</div></pre></td></tr></table></figure>
<p> To run it:</p>
<blockquote>
<p>liu<br>“(liu)”</p>
</blockquote>
</li>
<li><p><code>read-from-string</code></p>
<p> It let us read a syntax expression from a string instead of from the console. eg:</p>
 <figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="name">let</span> ((<span class="name">cmd</span> (<span class="name">read-from-string</span> <span class="string">"(liu)"</span>)))</div><div class="line"> 	(<span class="name">princ</span> cmd))</div></pre></td></tr></table></figure>
<p> To run it:</p>
<blockquote>
<p>(LIU)</p>
</blockquote>
</li>
</ol>
<p>I add game-read and game-eval functions to the original code.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Common-Lisp/" rel="tag"># Common Lisp</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/06/01/run-1/" rel="next" title="Run-1">
                <i class="fa fa-chevron-left"></i> Run-1
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014/05/31/my-previous-blog/" rel="prev" title="My Previous Blog">
                My Previous Blog <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/drawing.png"
               alt="liuxueyang" />
          <p class="site-author-name" itemprop="name">liuxueyang</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">457</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">55</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liuxueyang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
