<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.20.1" />
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>黑历史 &middot; liuxueyang</title>

  
  <link rel="stylesheet" href="http://liuxueyang.github.io/css/poole.css">
  <link rel="stylesheet" href="http://liuxueyang.github.io/css/hyde.css">
  <link rel="stylesheet" href="http://liuxueyang.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="http://liuxueyang.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://liuxueyang.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="http://liuxueyang.github.io/css/highlight/sunburst.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://liuxueyang.github.io/touch-icon-144-precomposed.png">
  <link href="http://liuxueyang.github.io/favicon.png" rel="icon">

  
  
  
  <link href="http://liuxueyang.github.io/index.xml" rel="alternate" type="application/rss+xml" title="黑历史 &middot; liuxueyang" />

  <meta name="description" content="This is my Notes">
  <meta name="keywords" content="Notes,Diary">
  
</head>
<body class="theme-base-08">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
        <img src="https://www.gravatar.com/avatar/2e3a2be066049f38f7a3f80eff0a5400?s=200"
             alt="gravatar" title="liuxueyang">
      
      <h1>liuxueyang</h1>
      <p class="lead">THE LAST ONE.</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="http://liuxueyang.github.io/">Blog</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="http://github.com/liuxueyang"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      
      
      
      
      
      
      </li>
    </ul>

    

    <p>Copyright &copy; 2017 <a href="http://liuxueyang.github.io/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="posts">
    
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/06/%E4%B8%80%E4%B8%AA%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F-%E5%85%B6%E5%AE%9E%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E6%A0%B9%E6%8D%AE%E4%BD%8D%E7%A7%BB%E8%BF%9B%E8%A1%8C%E8%BD%AC%E7%A7%BB%E7%9A%84%E5%BA%94%E7%94%A8_/">一个有意思的汇编程序 ——其实就是一个根据位移进行转移的应用=_=</a>
      </h1>
      <span class="post-date">Oct 6, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/06/%E4%B8%80%E4%B8%AA%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F-%E5%85%B6%E5%AE%9E%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E6%A0%B9%E6%8D%AE%E4%BD%8D%E7%A7%BB%E8%BF%9B%E8%A1%8C%E8%BD%AC%E7%A7%BB%E7%9A%84%E5%BA%94%E7%94%A8_/#disqus_thread">Comments</a>
      </span>
      
      分析一下这个程序=_=
assume cs:code code segment mov ax, 4c00h int 21h start: mov ax, 0 s: nop nop mov di, offset s mov si, offset s2 mov ax, cs:[si] mov cs:[di], ax s0: jmp short s s1: mov ax, 0 int 21h mov ax, 0 s2: jmp short s1 nop code ends end start  开始，一眼看去，这个程序应该会陷入死循环吧。。
其实，认真分析之后就会发现。这个程序竟然可以正常地运行并且退出！
首先，一定要注意jmp指令的内部运行方法！
首先呢，为了方便，我们先记录下每个标号的偏移地址和机器码。方便以后分析。
S: CS:8H CS:9H S0: CS:16H EBF0 JMP 8 S1: CS:18H B80000 S2: CS:20H EBF6 JMP 18  之后，S处的数据发生改变：
      <a href="http://liuxueyang.github.io/blog/2013/10/06/%E4%B8%80%E4%B8%AA%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F-%E5%85%B6%E5%AE%9E%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E6%A0%B9%E6%8D%AE%E4%BD%8D%E7%A7%BB%E8%BF%9B%E8%A1%8C%E8%BD%AC%E7%A7%BB%E7%9A%84%E5%BA%94%E7%94%A8_/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/06/%E5%AE%9E%E9%AA%8C%E4%B8%83%E7%8E%8B%E7%88%BD%E6%88%91%E5%86%99%E7%9A%84%E6%9C%80%E9%95%BF%E7%9A%84%E4%B8%80%E4%B8%AA%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F/">实验七——王爽…………我写的最长的一个汇编程序==</a>
      </h1>
      <span class="post-date">Oct 6, 2013 &middot; 2 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/06/%E5%AE%9E%E9%AA%8C%E4%B8%83%E7%8E%8B%E7%88%BD%E6%88%91%E5%86%99%E7%9A%84%E6%9C%80%E9%95%BF%E7%9A%84%E4%B8%80%E4%B8%AA%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F/#disqus_thread">Comments</a>
      </span>
      
      这是我到目前为止写的最长的汇编程序了。
assume cs:sad, ds:data, ss:stack stack segment stack ends data segment db '1975', '1976', '1977', '1978', '1979', '1980', '1981', '1982', '1983' db '1984', '1985', '1986', '1987', '1988', '1989', '1990', '1991', '1992' db '1993', '1994', '1995' ; 21 years -- 54h bytes dd 16, 22, 382, 1356, 2390, 8000, 16000, 24486, 50065, 97479, 140417, 197514 dd 345980, 590827, 803530, 1183000, 1843000, 2759000, 3753000, 4649000, 5937000 ; income in 21 years -- 54h bytes dw 3, 7, 9, 13, 28, 38, 130, 220, 476, 778, 1001, 1442, 2258, 2793, 4037, 5635, 8226 dw 11542, 14430, 15257, 17800 ; staff in 21 years -- 2ah bytes data ends table segment db 21 dup ('year summ ne ?
      <a href="http://liuxueyang.github.io/blog/2013/10/06/%E5%AE%9E%E9%AA%8C%E4%B8%83%E7%8E%8B%E7%88%BD%E6%88%91%E5%86%99%E7%9A%84%E6%9C%80%E9%95%BF%E7%9A%84%E4%B8%80%E4%B8%AA%E6%B1%87%E7%BC%96%E7%A8%8B%E5%BA%8F/">Read On &rarr;</a>
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/05/bx-bp-si-di%E5%AF%84%E5%AD%98%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99/">bx, bp, si, di寄存器的使用规则</a>
      </h1>
      <span class="post-date">Oct 5, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/05/bx-bp-si-di%E5%AF%84%E5%AD%98%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99/#disqus_thread">Comments</a>
      </span>
      
      首先，都可以单独使用。
另外，组合使用的情况下：
记住这张图片就行了=_=
意思就是，bx只能和si，di组合。bp只能和si，di组合。
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/05/%E6%9B%B4%E7%81%B5%E6%B4%BB%E7%9A%84%E5%AE%9A%E4%BD%8D%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E7%9A%84%E6%96%B9%E6%B3%95-%E5%B0%86%E6%AF%8F%E4%B8%AA%E5%8D%95%E8%AF%8D%E7%9A%84%E5%89%8D%E5%9B%9B%E4%B8%AA%E5%AD%97%E6%AF%8D%E6%94%B9%E4%B8%BA%E5%A4%A7%E5%86%99/">更灵活的定位内存地址的方法 ——将每个单词的前四个字母改为大写</a>
      </h1>
      <span class="post-date">Oct 5, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/05/%E6%9B%B4%E7%81%B5%E6%B4%BB%E7%9A%84%E5%AE%9A%E4%BD%8D%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E7%9A%84%E6%96%B9%E6%B3%95-%E5%B0%86%E6%AF%8F%E4%B8%AA%E5%8D%95%E8%AF%8D%E7%9A%84%E5%89%8D%E5%9B%9B%E4%B8%AA%E5%AD%97%E6%AF%8D%E6%94%B9%E4%B8%BA%E5%A4%A7%E5%86%99/#disqus_thread">Comments</a>
      </span>
      
      很简单的一个程序
assume cs:code, ss:stack, ds:data data segment db '1. display ' db '2. brows ' db '3. replace ' db '4. modify ' data ends stack segment dw 0, 0, 0, 0, 0, 0, 0, 0 stack ends code segment start: mov ax, data mov ds, ax mov ax, stack mov ss, ax mov sp, 10h mov bx, 3 mov cx, 4 s: push cx mov si, 4 mov cx, si mov si, 0 s0: mov al, [bx][si] and al, 11011111b mov [bx][si], al inc si loop s0 pop cx add bx, 10h loop s mov ax, 4c00h int 21h code ends end start  逻辑挺清晰的。自不必说。
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/04/%E6%9B%B4%E7%81%B5%E6%B4%BB%E7%9A%84%E5%AE%9A%E4%BD%8D%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E7%9A%84%E6%96%B9%E6%B3%95%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2/">更灵活的定位内存地址的方法——大小写转换</a>
      </h1>
      <span class="post-date">Oct 4, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/04/%E6%9B%B4%E7%81%B5%E6%B4%BB%E7%9A%84%E5%AE%9A%E4%BD%8D%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E7%9A%84%E6%96%B9%E6%B3%95%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2/#disqus_thread">Comments</a>
      </span>
      
      如下：
;BasiC to BASIC ;MinIX to minix assume cs:code, ds:data data segment db 'BaSiC' db 'MinIX' data ends code segment start: mov ax, data mov ds, ax mov bx, 0 mov cx, 5 s: mov al, 0[bx] and al, 11011111b mov 0[bx], al mov al, 5[bx] or al, 00100000b mov 5[bx], al inc bx loop s mov ax, 4c00h int 21h code ends end start  很简单的一个程序。
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/04/%E5%90%91%E5%86%85%E5%AD%980200~023f%E4%BE%9D%E6%AC%A1%E4%BC%A0%E9%80%81%E6%95%B0%E6%8D%AE0~3fh/">向内存0:200~0:23f依次传送数据0~3fh</a>
      </h1>
      <span class="post-date">Oct 4, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/04/%E5%90%91%E5%86%85%E5%AD%980200~023f%E4%BE%9D%E6%AC%A1%E4%BC%A0%E9%80%81%E6%95%B0%E6%8D%AE0~3fh/#disqus_thread">Comments</a>
      </span>
      
      只能用字节为单位传送了。
assume cs:sad sad segment start: mov ax, 20h mov ds, ax mov bx, 0 mov cx, 40h s: mov [bx], bl inc bl loop s mov ax, 4c00h int 21h sad ends end  我只能优化到这里了。用了7条指令。
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/04/%E5%B0%86%E5%86%85%E5%AD%98ffff0~ffffb%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8B%B7%E8%B4%9D%E5%88%B00200~020b%E4%B8%AD/">将内存ffff:0~ffff:b中的数据拷贝到0:200~0:20b中</a>
      </h1>
      <span class="post-date">Oct 4, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/04/%E5%B0%86%E5%86%85%E5%AD%98ffff0~ffffb%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E6%8B%B7%E8%B4%9D%E5%88%B00200~020b%E4%B8%AD/#disqus_thread">Comments</a>
      </span>
      
      我是按照字，也就是2个字节拷贝的。
这样就可以让循环减半==
assume cs:sad sad segment start: mov ax, 0ffffh mov ds, ax mov bx, 0h mov ax, 20h mov es, ax mov cx, 7h s: mov ax, ds:[bx] mov es:[bx], ax add bx, 2 loop s mov ax, 4c00h int 21h sad ends end  刚听到句歌词：
最初的天堂，最终的荒唐。
好熟悉，以前猫姐QQ空间的一句话。哈哈，2年多了，都变了多少啊。
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/04/%E8%AE%A1%E7%AE%97ffff0~ffffb%E6%95%B0%E6%8D%AE%E7%9A%84%E5%92%8C%E7%BB%93%E6%9E%9C%E5%AD%98%E5%9C%A8dx%E4%B8%AD/">计算ffff:0~ffff:b数据的和，结果存在dx中</a>
      </h1>
      <span class="post-date">Oct 4, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/04/%E8%AE%A1%E7%AE%97ffff0~ffffb%E6%95%B0%E6%8D%AE%E7%9A%84%E5%92%8C%E7%BB%93%E6%9E%9C%E5%AD%98%E5%9C%A8dx%E4%B8%AD/#disqus_thread">Comments</a>
      </span>
      
      代码：
assume cs:sad sad segment start: mov ax, 0ffffh mov ds, ax mov dx, 0 ; add ds:0bh~ds:1h mov cx, 0bh s: mov ah, 0 mov bx, cx mov al, ds:[bx] add dx, ax loop s ; add ds:0h mov bh, 0 mov bl, ds:[0] add dx, bx mov ax, 4c00h int 21h sad ends end  自己写的==
下面是看了书上的之后，写的：
assume cs:sad sad segment start: mov ax, 0ffffh mov ds, ax mov dx, 0 mov bx, 0 ; c = b + 1 mov cx, 0ch s: mov ah, 0 mov al, [bx] inc bx add dx, ax loop s mov ax, 4c00h int 21h sad ends end  主要是加上了inc bx的用法==
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/04/debug%E4%B8%8D%E8%BF%87%E7%9A%84%E7%A8%8B%E5%BA%8F/">debug不过的程序</a>
      </h1>
      <span class="post-date">Oct 4, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/04/debug%E4%B8%8D%E8%BF%87%E7%9A%84%E7%A8%8B%E5%BA%8F/#disqus_thread">Comments</a>
      </span>
      
      下面的程序debug是不能通过的。
至于为什么我还不知道。
assume cs:codesg codesg segment start: mov ax,2000h mov ss, ax mov sp, 0 add sp, 4 pop ax pop bx push ax push bx pop ax pop bx mov ax, 4c00h int 21h codesg ends end  这个问题留在这里，以后解决。
以后学习的时候，一定要选好书！╮(╯▽╰)╭
      
      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://liuxueyang.github.io/blog/2013/10/03/%E6%A0%88%E6%AE%B5-%E6%BB%A1%E6%98%AF%E7%96%91%E9%97%AE/">栈段 ——满是疑问==</a>
      </h1>
      <span class="post-date">Oct 3, 2013 &middot; 1 minute read &middot; <a href="http://liuxueyang.github.io/blog/2013/10/03/%E6%A0%88%E6%AE%B5-%E6%BB%A1%E6%98%AF%E7%96%91%E9%97%AE/#disqus_thread">Comments</a>
      </span>
      
      遇到一个问题
比如：
用栈操作将10000H~1000FH中的8个字，逆序拷贝到2000H~2000FH中。
写出以下代码：
mov ax, 2000h mov ds, ax mov ax, f00h mov ss, ax mov sp, 1000h pop [e] pop [c] pop [a] pop [8] pop [6] pop [4] pop [2] pop [0]  开始我还以为可能是栈空间太小，跟以前一样的问题，特意把栈的短地址缩小到f00h，可是还是结果不对，跟踪之后我发现，
拷贝过去的内容是对的，但是10000H处的内容却被改写了。现在我还是不知道为什么，为什么这个内存地址的内容会被改变呢？
满是疑惑……=_=
……………………………………………………………………==………………………………………………………………………………
刚才又遇到了类似的问题。
貌似明白一点了。只是猜的=_=。虽然不知道为什么，但是表面上懂一点了。
当内存中的某个段当做栈顶的时候，也就是说寄存器ss改变的时候，可能会在附近记录CS,IP,SS的值。还是没有完全明白……越来越混乱了……==
      
      
    </div>
    
    
    
    <ul class="pagination">
        
        <li>
            <a href="/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
        </li>
        
        <li
        >
        <a href="/page/13/" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
        </li>
        
        <li
        ><a href="/">1</a></li>
        
        <li
        ><a href="/page/2/">2</a></li>
        
        <li
        ><a href="/page/3/">3</a></li>
        
        <li
        ><a href="/page/4/">4</a></li>
        
        <li
        ><a href="/page/5/">5</a></li>
        
        <li
        ><a href="/page/6/">6</a></li>
        
        <li
        ><a href="/page/7/">7</a></li>
        
        <li
        ><a href="/page/8/">8</a></li>
        
        <li
        ><a href="/page/9/">9</a></li>
        
        <li
        ><a href="/page/10/">10</a></li>
        
        <li
        ><a href="/page/11/">11</a></li>
        
        <li
        ><a href="/page/12/">12</a></li>
        
        <li
        ><a href="/page/13/">13</a></li>
        
        <li
        class="active"><a href="/page/14/">14</a></li>
        
        <li
        ><a href="/page/15/">15</a></li>
        
        <li
        ><a href="/page/16/">16</a></li>
        
        <li
        ><a href="/page/17/">17</a></li>
        
        <li
        ><a href="/page/18/">18</a></li>
        
        <li
        ><a href="/page/19/">19</a></li>
        
        <li
        ><a href="/page/20/">20</a></li>
        
        <li
        ><a href="/page/21/">21</a></li>
        
        <li
        ><a href="/page/22/">22</a></li>
        
        <li
        ><a href="/page/23/">23</a></li>
        
        <li
        ><a href="/page/24/">24</a></li>
        
        <li
        ><a href="/page/25/">25</a></li>
        
        <li
        ><a href="/page/26/">26</a></li>
        
        <li
        ><a href="/page/27/">27</a></li>
        
        <li
        ><a href="/page/28/">28</a></li>
        
        <li
        ><a href="/page/29/">29</a></li>
        
        <li
        ><a href="/page/30/">30</a></li>
        
        <li
        ><a href="/page/31/">31</a></li>
        
        <li
        ><a href="/page/32/">32</a></li>
        
        <li
        ><a href="/page/33/">33</a></li>
        
        <li
        ><a href="/page/34/">34</a></li>
        
        <li
        ><a href="/page/35/">35</a></li>
        
        <li
        ><a href="/page/36/">36</a></li>
        
        <li
        ><a href="/page/37/">37</a></li>
        
        <li
        ><a href="/page/38/">38</a></li>
        
        <li
        ><a href="/page/39/">39</a></li>
        
        <li
        ><a href="/page/40/">40</a></li>
        
        <li
        ><a href="/page/41/">41</a></li>
        
        <li
        ><a href="/page/42/">42</a></li>
        
        <li
        ><a href="/page/43/">43</a></li>
        
        <li
        ><a href="/page/44/">44</a></li>
        
        <li
        ><a href="/page/45/">45</a></li>
        
        <li
        ><a href="/page/46/">46</a></li>
        
        <li
        ><a href="/page/47/">47</a></li>
        
        <li
        ><a href="/page/48/">48</a></li>
        
        <li
        >
        <a href="/page/15/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
        </li>
        
        <li>
            <a href="/page/48/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
        </li>
        
    </ul>
    
  </div>
</div>


<script type="text/javascript">
var disqus_shortname = "abeliu";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

<script src="http://liuxueyang.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

