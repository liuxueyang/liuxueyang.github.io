<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="黑历史">
<meta property="og:url" content="liuxueyang.github.io/page/3/index.html">
<meta property="og:site_name" content="黑历史">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="黑历史">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="liuxueyang.github.io/page/3/"/>





  <title> 黑历史 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">黑历史</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/08/14/Spoj-ANARC09A-Seinfeld/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/14/Spoj-ANARC09A-Seinfeld/" itemprop="url">
                  Spoj: ANARC09A - Seinfeld
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-14T15:59:14+08:00">
                2016-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.spoj.com/problems/ANARC09A/" target="_blank" rel="external">题目意思：</a></p>
<pre><code>一个字符串由`{`和`}`组成，长度最多位2000，求最少修改多少次可以使得这个字符串合法。
</code></pre><p>如果把合法的字符串都消去的话，那么最后留下不合法的括号，一定是这样的<code>}*{*</code>其中<br><code>*</code>代表0个或者多个。题目规定字符串长度是偶数，所以不合法的括号的长度也一定是偶数，<br>假设它是<code>len</code>。</p>
<pre><code>1. 如果只有左括号或者右括号，那么答案是`len/2`；
2. 如果左右括号都有，那么答案是左括号的个数/2 + 右括号的个数 / 2，如果左括号
   或者右括号的个数是奇数，那么答案增加一。比如这个例子：`}}}{{{`
</code></pre><p>所以复杂度是O(n)。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * =====================================================================================</div><div class="line"> *</div><div class="line"> *       Filename:  main.cpp</div><div class="line"> *</div><div class="line"> *    Description:  http://www.spoj.com/problems/ANARC09A/</div><div class="line"> *</div><div class="line"> *        Version:  1.0</div><div class="line"> *        Created:  2016年08月14日 14时01分45秒</div><div class="line"> *       Compiler:  g++</div><div class="line"> *</div><div class="line"> *         Author:  Sabastian (liuxueyang.github.io), read3valprintloop@gmail.com</div><div class="line"> *</div><div class="line"> * =====================================================================================</div><div class="line"> */</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _ ios_base::sync_with_stdio(0);cin.tie(0);</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i, a, n) for (int i = a; i &lt; n; ++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i, a, n) for (int i = n-1; i &gt;= a; --i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; MI;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> ll MOD=<span class="number">1000000007</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span></span></div><div class="line">&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  ONLINE_JUDGE</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span>     <span class="comment">/* -----  ONLINE_JUDGE  ----- */</span></span></div><div class="line">  <span class="keyword">int</span> T=<span class="number">1</span>;</div><div class="line">  <span class="built_in">string</span> s;<span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;s)&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="string">'-'</span>==s[<span class="number">0</span>])<span class="keyword">break</span>; </div><div class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>,sum=<span class="number">0</span>;</div><div class="line">    rep(i,<span class="number">0</span>,(<span class="keyword">int</span>)s.length())<span class="string">'&#123;'</span>==s[i]?sum--:(sum&lt;<span class="number">0</span>?++sum:++cnt);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;T&lt;&lt;<span class="string">". "</span>;sum=-sum;++T;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;(sum&amp;&amp;cnt?cnt/<span class="number">2</span>+(cnt&amp;<span class="number">1</span>)+sum/<span class="number">2</span>+(sum&amp;<span class="number">1</span>):(sum?sum/<span class="number">2</span>:cnt/<span class="number">2</span>))&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</div><div class="line">&#125;				<span class="comment">/* ----------  end of function main  ---------- */</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/08/14/Spoj-dynamic-programming-ASSIGN-Assignments/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/14/Spoj-dynamic-programming-ASSIGN-Assignments/" itemprop="url">
                  Spoj, dynamic-programming: ASSIGN - Assignments
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-14T15:08:27+08:00">
                2016-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.spoj.com/problems/ASSIGN/" target="_blank" rel="external">题目意思：</a></p>
<pre><code>有n个学生和n个任务，每个学生有喜欢的任务，输入一个矩阵，第i行第j列表示第i个
学生喜欢第j个任务。把任务分配给所有学生，使得每个学生得到的任务都是他喜欢的。
输出有多少种分配方法。n的最大值是20。
</code></pre><p>用一个数字的一个位表示这个任务是否已经被分配，如果任务全部被分配，那么这个数字就<br>是<code>(1&lt;&lt;n)-1</code>。可以想到这样的递归方法：<code>solve(i,mask)</code> 表示对i..n这些人分配任务的<br>方法的数目，mask代表此时对1..i-1这些人已经分配了任务，也就是说mask的二进制表示里<br>面有i-1个1。对当前的人，如果他喜欢第j个任务，并且mask的第j位是0，那么就可以把这<br>个任务分配给他，继续考虑下一个人。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * =====================================================================================</div><div class="line"> *</div><div class="line"> *       Filename:  main1.cpp</div><div class="line"> *</div><div class="line"> *    Description:  http://www.spoj.com/problems/ASSIGN/</div><div class="line"> *</div><div class="line"> *        Version:  2.0</div><div class="line"> *        Created:  08/13/2016 14:13:42</div><div class="line"> *       Compiler:  g++</div><div class="line"> *</div><div class="line"> *         Author:  Sabastian (liuxueyang.github.io), read3valprintloop@gmail.com</div><div class="line"> *</div><div class="line"> * =====================================================================================</div><div class="line"> */</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _ ios_base::sync_with_stdio(0);cin.tie(0);</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i, a, n) for (int i = a; i &lt; n; ++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i, a, n) for (int i = n-1; i &gt;= a; --i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; MI;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> ll MOD=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=((<span class="number">1</span>&lt;&lt;<span class="number">20</span>)+<span class="number">10</span>);</div><div class="line">ll a[<span class="number">25</span>][N];</div><div class="line"><span class="keyword">int</span> b[<span class="number">25</span>][<span class="number">25</span>];</div><div class="line">ll result;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"> </div><div class="line"><span class="function">ll <span class="title">solve</span><span class="params">(<span class="keyword">int</span> stu, ll mask)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>(a[stu][mask])<span class="keyword">return</span> a[stu][mask];</div><div class="line">  <span class="keyword">if</span>(stu&gt;=n+<span class="number">1</span>)<span class="keyword">return</span> a[stu][mask]=<span class="number">1</span>;</div><div class="line">  ll result=<span class="number">0</span>;rep(j,<span class="number">0</span>,n)&#123;</div><div class="line">    <span class="keyword">if</span>( b[stu<span class="number">-1</span>][j]==<span class="number">1</span> &amp;&amp; !((<span class="number">1</span>&lt;&lt;j)&amp;mask) )</div><div class="line">      result+=solve(stu+<span class="number">1</span>,mask|(<span class="number">1</span>&lt;&lt;j));</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> a[stu][mask]=result;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span></span></div><div class="line">&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  ONLINE_JUDGE</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span>     <span class="comment">/* -----  ONLINE_JUDGE  ----- */</span></span></div><div class="line"> </div><div class="line">  <span class="keyword">int</span> T;<span class="built_in">cin</span>&gt;&gt;T;<span class="keyword">while</span>(T--)&#123;</div><div class="line">    <span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="keyword">sizeof</span>(a)); <span class="built_in">cin</span>&gt;&gt;n;rep(i,<span class="number">0</span>,n)rep(j,<span class="number">0</span>,n)<span class="built_in">cin</span>&gt;&gt;b[i][j];</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;solve(<span class="number">1</span>,<span class="number">0</span>)&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  &#125;</div><div class="line"> </div><div class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</div><div class="line">&#125;				<span class="comment">/* ----------  end of function main  ---------- */</span></div></pre></td></tr></table></figure>
<p>然而，这会TLE。</p>
<p>这个做法递归到最后，递归结束的时候，其实是在<code>solve(stu,mask)</code>里面的<code>stu==n+1</code>的<br>时候。所以我们可以从下到上计算。<code>dp[(1&lt;&lt;n)-1]=1;</code>这是初始的条件。我们把<code>mask</code>从<br><code>(1&lt;&lt;n)-2</code>开始循环，一直到0，那么可以发现计算<code>dp[i]</code>的时候<code>dp[i..]</code>已经计算过了。<br>另外，可以根据<code>i</code>里面的<code>1</code>的个数来判断当前是哪一个学生。</p>
<p>复杂度是O(n*2^n)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * =====================================================================================</div><div class="line"> *</div><div class="line"> *       Filename:  main1.cpp</div><div class="line"> *</div><div class="line"> *    Description:  http://www.spoj.com/problems/ASSIGN/</div><div class="line"> *</div><div class="line"> *        Version:  2.0</div><div class="line"> *        Created:  2016年08月14日 13时32分54秒</div><div class="line"> *       Compiler:  g++</div><div class="line"> *</div><div class="line"> *         Author:  Sabastian (liuxueyang.github.io), read3valprintloop@gmail.com</div><div class="line"> *</div><div class="line"> * =====================================================================================</div><div class="line"> */</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _ ios_base::sync_with_stdio(0);cin.tie(0);</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i, a, n) for (int i = a; i &lt; n; ++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i, a, n) for (int i = n-1; i &gt;= a; --i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; MI;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> ll MOD=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> ll N=<span class="number">1</span>&lt;&lt;<span class="number">20</span>;</div><div class="line"><span class="keyword">int</span> b[<span class="number">25</span>][N];</div><div class="line">ll a[N];</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cnt1</span><span class="params">(ll n)</span></span>&#123;<span class="keyword">int</span> cnt=<span class="number">0</span>;<span class="keyword">while</span>(n)&#123;<span class="keyword">if</span>(n&amp;<span class="number">1</span>) ++cnt;n/=<span class="number">2</span>;&#125;<span class="keyword">return</span> cnt;&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span></span></div><div class="line">&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  ONLINE_JUDGE</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span>     <span class="comment">/* -----  ONLINE_JUDGE  ----- */</span></span></div><div class="line"></div><div class="line">    <span class="keyword">int</span> T;<span class="built_in">cin</span>&gt;&gt;T;<span class="keyword">while</span>(T--) &#123;</div><div class="line">        <span class="built_in">cin</span>&gt;&gt;n; rep(i,<span class="number">1</span>,n+<span class="number">1</span>) rep(j,<span class="number">1</span>,n+<span class="number">1</span>) <span class="built_in">cin</span>&gt;&gt;b[i][j];</div><div class="line">        <span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="keyword">sizeof</span>(a));</div><div class="line">        a[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>]=<span class="number">1</span>;</div><div class="line">        per(mask,<span class="number">0</span>,(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>)&#123;<span class="keyword">int</span> row=cnt1(mask);row++;</div><div class="line">            rep(j,<span class="number">1</span>,n+<span class="number">1</span>) <span class="keyword">if</span>(b[row][j]&amp;&amp;(<span class="number">0</span>==(mask&amp;(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))))) a[mask]+=a[mask|(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))];</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;a[<span class="number">0</span>]&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</div><div class="line">&#125;				<span class="comment">/* ----------  end of function main  ---------- */</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/08/12/Spoj-dynamic-programming-AIBOHP-Aibohphobia/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/12/Spoj-dynamic-programming-AIBOHP-Aibohphobia/" itemprop="url">
                  Spoj, dynamic-programming: AIBOHP - Aibohphobia
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-12T21:36:32+08:00">
                2016-08-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>给一个字符串，求最少插入多少个字符，可以使得这个字符串是回文的。</p>
<p>可以这样想：我们假设它已经是回文的，那么把这个字符串逆序，如果它是回文的，那么对<br>应的每个字符应该相等。可以它不是回文的，那么就需要尽量少地加一些字符，加多少呢？<br>那么需要知道当前的最长连续公共子序列的长度len，把不相等的那些字符串加进去就成为<br>了回文的。加进去的字符的最少个数 = 字符串长度 - 原先的字符串和它的逆序字符串的最<br>长连续公共子序列的长度。</p>
<p>问题就转化为求两个序列的最长公共子序列。这个就简单了。</p>
<p>因为懒并且想省时间，所以就用了一些宏，这让程序变得不易读，还好程序比较简单，不太<br>影响吧。反正以后也不会再读。。了解思路就可以了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * =====================================================================================</div><div class="line"> *</div><div class="line"> *       Filename:  main.cpp</div><div class="line"> *</div><div class="line"> *    Description:  http://www.spoj.com/problems/AIBOHP/</div><div class="line"> *</div><div class="line"> *        Version:  1.0</div><div class="line"> *        Created:  08/12/2016 18:27:30</div><div class="line"> *       Compiler:  g++</div><div class="line"> *</div><div class="line"> *         Author:  Sabastian (liuxueyang.github.io), liuxueyang457@gmail.com</div><div class="line"> *</div><div class="line"> * =====================================================================================</div><div class="line"> */</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _ ios_base::sync_with_stdio(0);cin.tie(0);</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i, a, n) for (int i = a; i &lt; n; ++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i, a, n) for (int i = n-1; i &gt; a; --i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; MI;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> ll MOD=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">6120</span>;</div><div class="line"><span class="keyword">int</span> a[N][N];</div><div class="line"><span class="keyword">char</span> s[N],t[N],str[N];</div><div class="line">  <span class="function"><span class="keyword">int</span></span></div><div class="line"><span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span></div><div class="line">&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  ONLINE_JUDGE</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span>     <span class="comment">/* -----  ONLINE_JUDGE  ----- */</span></span></div><div class="line"></div><div class="line">  <span class="keyword">int</span> T;<span class="built_in">cin</span>&gt;&gt;T;<span class="keyword">while</span>(T--)&#123;</div><div class="line">    <span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="keyword">sizeof</span>(a));</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;str;<span class="keyword">int</span> len=<span class="built_in">strlen</span>(str);</div><div class="line">    rep(i,<span class="number">0</span>,len)s[i+<span class="number">1</span>]=str[i];</div><div class="line">    rep(i,<span class="number">1</span>,len+<span class="number">1</span>)t[len+<span class="number">1</span>-i]=s[i];</div><div class="line">    rep(i,<span class="number">1</span>,len+<span class="number">1</span>)&#123;</div><div class="line">      rep(j,<span class="number">1</span>,len+<span class="number">1</span>)&#123;</div><div class="line">        <span class="keyword">if</span>(s[i]==t[j])&#123;</div><div class="line">          a[i][j]=max(a[i][j],a[i<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">          <span class="keyword">int</span> mm=max(a[i<span class="number">-1</span>][j],a[i][j<span class="number">-1</span>]);</div><div class="line">          a[i][j]=max(a[i][j],mm);</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;len-a[len][len]&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</div><div class="line">&#125;				<span class="comment">/* ----------  end of function main  ---------- */</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/08/12/Spoj-dynamic-programming-BYTESM2-Philosophers-Stone/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/12/Spoj-dynamic-programming-BYTESM2-Philosophers-Stone/" itemprop="url">
                  Spoj, dynamic-programming: BYTESM2 - Philosophers Stone
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-12T21:32:26+08:00">
                2016-08-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在矩阵里面捡石头，求最大值。和常见的直角三角形那样的问题是一样的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * =====================================================================================</div><div class="line"> *</div><div class="line"> *       Filename:  main.cpp</div><div class="line"> *</div><div class="line"> *    Description:  http://www.spoj.com/problems/BYTESM2/</div><div class="line"> *</div><div class="line"> *        Version:  1.0</div><div class="line"> *        Created:  08/12/2016 18:49:12</div><div class="line"> *       Compiler:  g++</div><div class="line"> *</div><div class="line"> *         Author:  Sabastian (liuxueyang.github.io), liuxueyang457@gmail.com</div><div class="line"> *</div><div class="line"> * =====================================================================================</div><div class="line"> */</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _ ios_base::sync_with_stdio(0);cin.tie(0);</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i, a, n) for (int i = a; i &lt; n; ++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i, a, n) for (int i = n-1; i &gt;= a; --i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; MI;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> ll MOD=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">120</span>;</div><div class="line"><span class="keyword">int</span> a[N][N],result;</div><div class="line">  <span class="function"><span class="keyword">int</span></span></div><div class="line"><span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span></div><div class="line">&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  ONLINE_JUDGE</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span>     <span class="comment">/* -----  ONLINE_JUDGE  ----- */</span></span></div><div class="line">  <span class="keyword">int</span> T;<span class="built_in">cin</span>&gt;&gt;T;<span class="keyword">while</span>(T--)&#123;</div><div class="line">    <span class="built_in">memset</span>(a,<span class="number">0</span>,<span class="keyword">sizeof</span>(a));</div><div class="line">    <span class="keyword">int</span> r,c;<span class="built_in">cin</span>&gt;&gt;r&gt;&gt;c;rep(i,<span class="number">1</span>,r+<span class="number">1</span>)rep(j,<span class="number">1</span>,c+<span class="number">1</span>)<span class="built_in">cin</span>&gt;&gt;a[i][j];</div><div class="line">    rep(i,<span class="number">2</span>,r+<span class="number">1</span>)rep(j,<span class="number">1</span>,c+<span class="number">1</span>)&#123;</div><div class="line">      <span class="keyword">int</span> tmp=<span class="number">0</span>;</div><div class="line">      tmp=max(a[i<span class="number">-1</span>][j],tmp);</div><div class="line">      <span class="keyword">if</span>(j&gt;=<span class="number">2</span>)tmp=max(tmp,a[i<span class="number">-1</span>][j<span class="number">-1</span>]);</div><div class="line">      <span class="keyword">if</span>(j&lt;=c<span class="number">-1</span>)tmp=max(tmp,a[i<span class="number">-1</span>][j+<span class="number">1</span>]);</div><div class="line">      a[i][j]+=tmp;</div><div class="line">    &#125;</div><div class="line">    result=<span class="number">0</span>;rep(j,<span class="number">1</span>,c+<span class="number">1</span>)result=max(result,a[r][j]);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;result&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</div><div class="line">&#125;				<span class="comment">/* ----------  end of function main  ---------- */</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/08/12/Dynamic-programming-Spoj-DIEHARD-DIE-HARD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/12/Dynamic-programming-Spoj-DIEHARD-DIE-HARD/" itemprop="url">
                  Dynamic-programming: Spoj DIEHARD - DIE HARD
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-12T21:14:23+08:00">
                2016-08-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>题目很好理解：</p>
<pre><code>有三个区域，你在每个区域里面只能停留一秒，每个区域会对你的两个指标h和a增加或者减少：

    区域A：h += 3, a += 2
    区域B：h -= 5, a -= 10
    区域C：h -= 20, a+= 5

你在任意区域最多只能停留1秒，下一秒必须移动到其它两个区域中的一个，也就是说
你不能一直呆在一个区域。在任意时刻，如果你的两个指标其中的任意一个&lt;=0，那么
游戏结束，输出你一共在游戏里面停留了多长时间。
</code></pre><p>如果不加什么思考，那么容易想到，直接递归就可以了，递归函数有三个参数：当前的h值，<br>当前的a值，当前的位置。为了不重复求解，用一个三位数组存储这一步的结果。</p>
<p>程序如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * =====================================================================================</div><div class="line"> *</div><div class="line"> *       Filename:  main.cpp</div><div class="line"> *</div><div class="line"> *    Description:  http://www.spoj.com/problems/DIEHARD/</div><div class="line"> *</div><div class="line"> *        Version:  1.0</div><div class="line"> *        Created:  08/12/2016 20:04:27</div><div class="line"> *       Compiler:  g++</div><div class="line"> *</div><div class="line"> *         Author:  Sabastian (liuxueyang.github.io), liuxueyang457@gmail.com</div><div class="line"> *</div><div class="line"> * =====================================================================================</div><div class="line"> */</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _ ios_base::sync_with_stdio(0);cin.tie(0);</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i, a, n) for (int i = a; i &lt; n; ++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i, a, n) for (int i = n-1; i &gt;= a; --i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; MI;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> ll MOD=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1020</span>;</div><div class="line">ll sum[N][N][<span class="number">4</span>];</div><div class="line"><span class="function">ll <span class="title">solve</span><span class="params">(<span class="keyword">int</span> h,<span class="keyword">int</span> a,<span class="keyword">int</span> pos)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>(h&lt;=<span class="number">0</span>||a&lt;=<span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  <span class="keyword">if</span>(<span class="number">-1</span>!=sum[h][a][pos])<span class="keyword">return</span> sum[h][a][pos];</div><div class="line">  ll a1,a2,a3;</div><div class="line">  <span class="keyword">if</span>(pos==<span class="number">1</span>)&#123;</div><div class="line">    a2=solve(h<span class="number">-5</span>,a<span class="number">-10</span>,<span class="number">2</span>);</div><div class="line">    a3=solve(h<span class="number">-20</span>,a+<span class="number">5</span>,<span class="number">3</span>);</div><div class="line">    <span class="keyword">return</span> sum[h][a][pos]=<span class="number">1</span>+max(a2,a3);</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span>(pos==<span class="number">2</span>) &#123;</div><div class="line">    a1=solve(h+<span class="number">3</span>,a+<span class="number">2</span>,<span class="number">1</span>);</div><div class="line">    a3=solve(h<span class="number">-20</span>,a+<span class="number">5</span>,<span class="number">3</span>);</div><div class="line">    <span class="keyword">return</span> sum[h][a][pos]=<span class="number">1</span>+max(a1,a3);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    a1=solve(h+<span class="number">3</span>,a+<span class="number">2</span>,<span class="number">1</span>);</div><div class="line">    a2=solve(h<span class="number">-5</span>,a<span class="number">-10</span>,<span class="number">2</span>);</div><div class="line">    <span class="keyword">return</span> sum[h][a][pos]=<span class="number">1</span>+max(a1,a2);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">  <span class="function"><span class="keyword">int</span></span></div><div class="line"><span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span></div><div class="line">&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  ONLINE_JUDGE</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span>     <span class="comment">/* -----  ONLINE_JUDGE  ----- */</span></span></div><div class="line"></div><div class="line">  <span class="keyword">int</span> T,h,a;<span class="built_in">cin</span>&gt;&gt;T;<span class="keyword">while</span>(T--)&#123;</div><div class="line">    <span class="built_in">memset</span>(sum,<span class="number">-1</span>,<span class="keyword">sizeof</span>(sum));</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;h&gt;&gt;a;</div><div class="line">    ll a1=solve(h,a,<span class="number">1</span>),a2=solve(h,a,<span class="number">2</span>),a3=solve(h,a,<span class="number">3</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;max(a1,max(a2,a3))<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</div><div class="line">&#125;				<span class="comment">/* ----------  end of function main  ---------- */</span></div></pre></td></tr></table></figure>
<p>程序风格写成这样，单纯是为了减少按键次数，不想按空格……所以就尽量写紧凑一点。也不<br>想按回车键，所以除非必要的时候，不换行……反正这种程序也不复杂，以后我也不会再读，<br>大概了解思路就好了。</p>
<p>还可以稍微优化一下，注意到区域A对h和a值都会增加，所以，为了使停留时间尽量长，应该这样：</p>
<pre><code>第一秒在区域A，第二秒在区域B或C，第三秒回到区域A，如此反复。
</code></pre><p>这样想，程序就简单一些：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * =====================================================================================</div><div class="line"> *</div><div class="line"> *       Filename:  main.cpp</div><div class="line"> *</div><div class="line"> *    Description:  http://www.spoj.com/problems/DIEHARD/</div><div class="line"> *</div><div class="line"> *        Version:  2.0</div><div class="line"> *        Created:  08/12/2016 20:50:32</div><div class="line"> *       Compiler:  g++</div><div class="line"> *</div><div class="line"> *         Author:  Sabastian (liuxueyang.github.io), liuxueyang457@gmail.com</div><div class="line"> *</div><div class="line"> * =====================================================================================</div><div class="line"> */</div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> _ ios_base::sync_with_stdio(0);cin.tie(0);</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i, a, n) for (int i = a; i &lt; n; ++i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> per(i, a, n) for (int i = n-1; i &gt;= a; --i)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mp make_pair</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(),(x).end()</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(x) ((int)(x).size())</span></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; VI;</div><div class="line"><span class="keyword">typedef</span> <span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; MI;</div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</div><div class="line"><span class="keyword">const</span> ll MOD=<span class="number">1000000007</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1020</span>;</div><div class="line">ll sum[N][N];</div><div class="line"><span class="function">ll <span class="title">solve</span><span class="params">(<span class="keyword">int</span> h,<span class="keyword">int</span> a)</span></span>&#123;</div><div class="line">  <span class="keyword">if</span>(h&lt;=<span class="number">0</span>||a&lt;=<span class="number">0</span>)<span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">  <span class="keyword">if</span>(<span class="number">-1</span>!=sum[h][a])<span class="keyword">return</span> sum[h][a];</div><div class="line">  ll a2=solve(h<span class="number">-2</span>,a<span class="number">-8</span>), a3=solve(h<span class="number">-17</span>,a+<span class="number">7</span>);</div><div class="line">  <span class="keyword">return</span> sum[h][a]=<span class="number">2</span>+max(a2,a3);</div><div class="line">&#125;</div><div class="line">  <span class="function"><span class="keyword">int</span></span></div><div class="line"><span class="title">main</span> <span class="params">( <span class="keyword">void</span> )</span></div><div class="line">&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifndef</span>  ONLINE_JUDGE</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span>     <span class="comment">/* -----  ONLINE_JUDGE  ----- */</span></span></div><div class="line"></div><div class="line">  <span class="keyword">int</span> T,h,a;<span class="built_in">cin</span>&gt;&gt;T;<span class="keyword">while</span>(T--)&#123;</div><div class="line">    <span class="built_in">memset</span>(sum,<span class="number">-1</span>,<span class="keyword">sizeof</span>(sum));</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;h&gt;&gt;a;<span class="built_in">cout</span>&lt;&lt;solve(h,a)&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> EXIT_SUCCESS;</div><div class="line">&#125;				<span class="comment">/* ----------  end of function main  ---------- */</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/08/04/show-and-hide-dot-files-in-Finder-of-OS-X-El-Capitan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/04/show-and-hide-dot-files-in-Finder-of-OS-X-El-Capitan/" itemprop="url">
                  show and hide dot files in Finder of OS X El Capitan
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-04T10:39:01+08:00">
                2016-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Fish"><a href="#Fish" class="headerlink" title="Fish"></a>Fish</h2><p>Run the following code in fish shell. Then it works as a charm. :-)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function showFiles</div><div class="line">        defaults write com.apple.finder AppleShowAllFiles YES</div><div class="line">        killall Finder /System/Library/CoreServices/Finder.app</div><div class="line">end</div><div class="line"></div><div class="line">funcsave showFiles</div><div class="line"></div><div class="line">function hideFiles</div><div class="line">        defaults write com.apple.finder AppleShowAllFiles NO</div><div class="line">        killall Finder /System/Library/CoreServices/Finder.app</div><div class="line">end</div><div class="line">    </div><div class="line">funcsave hideFiles</div></pre></td></tr></table></figure>
<p>:joy:</p>
<h2 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h2><p>Add the following code to <code>~/.zshrc</code></p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">alias</span> showFiles=<span class="string">'defaults write com.apple.finder AppleShowAllFiles YES; killall Finder /System/Library/CoreServices/Finder.app'</span></div><div class="line"><span class="built_in">alias</span> hideFiles=<span class="string">'defaults write com.apple.finder AppleShowAllFiles NO; killall Finder /System/Library/CoreServices/Finder.app'</span></div></pre></td></tr></table></figure>
<p>then run <code>source ~/.zshrc</code></p>
<h2 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h2><p>Add the code the same as <code>zsh</code> above to <code>~/.bashrc</code>. Then run <code>source ~/.bashrc</code></p>
<hr>
<p>Then, if you want to show hidden files in Finder, just execute <code>showFiles</code> in Terminal. If you want to hide hidden files, use <code>hideFiles</code> instead.</p>
<p>:joy:</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/08/01/Text-Adventure-Game-in-Land-of-Lisp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/01/Text-Adventure-Game-in-Land-of-Lisp/" itemprop="url">
                  Text Adventure Game in Land of Lisp
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-01T23:19:46+08:00">
                2016-08-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Land of LiSP</strong> 这本书里面的第五章和第六章构建了一个字符冒险游戏，游戏截图如下：</p>
<p><img src="/img/text-adventure-game.png" alt="Text Adventure Game"></p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div></pre></td><td class="code"><pre><div class="line"><span class="comment">;; 2016.07.30 23:22:41 PM</span></div><div class="line"><span class="comment">;; Sabastian</span></div><div class="line"><span class="comment">;; building a text adventure game engine</span></div><div class="line"></div><div class="line"><span class="comment">;; ====================</span></div><div class="line"><span class="comment">;; location</span></div><div class="line"></div><div class="line">(<span class="name">defparameter</span> *nodes*</div><div class="line">  '((living-room (you are in the living-room.</div><div class="line">                  a wizard is snoring loudly on the couch.))</div><div class="line">    (garden (you are in a beautiful garden.</div><div class="line">             there is a well in front of you.))</div><div class="line">    (attic (you are in the attic.</div><div class="line">            there is a giant welding torch in the corner.))))</div><div class="line"></div><div class="line">(<span class="name">defun</span> describe-location (<span class="name">location</span> nodes)</div><div class="line">  <span class="string">"location is a symbol.</span></div><div class="line">nodes is the global variable."</div><div class="line">  (<span class="name">cadr</span> (<span class="name">assoc</span> location nodes)))</div><div class="line"></div><div class="line"><span class="comment">;; ====================</span></div><div class="line"><span class="comment">;; edges</span></div><div class="line"></div><div class="line">(<span class="name">defparameter</span> *edges*</div><div class="line">  '((living-room</div><div class="line">     (garden west door)</div><div class="line">     (attic upstairs ladder))</div><div class="line">    (garden</div><div class="line">     (living-room east door))</div><div class="line">    (attic</div><div class="line">     (living-room downstairs ladder))))</div><div class="line"></div><div class="line">(<span class="name">defun</span> describe-path (<span class="name">edge</span>)</div><div class="line">  `(there is a ,(caddr edge) going ,(cadr edge) from here.))</div><div class="line"></div><div class="line">(<span class="name">defun</span> describe-paths (<span class="name">location</span> edges)</div><div class="line">  <span class="string">"location is a symbol.</span></div><div class="line">edges is the global variable"</div><div class="line">  (<span class="name">apply</span> #'append</div><div class="line">         (<span class="name">mapcar</span> #'describe-path</div><div class="line">                 (<span class="name">cdr</span> (<span class="name">assoc</span> location edges)))))</div><div class="line"></div><div class="line"><span class="comment">;; ====================</span></div><div class="line"><span class="comment">;; objects</span></div><div class="line"></div><div class="line">(<span class="name">defparameter</span> *objects* '(whiskey bucket frog chain))</div><div class="line">(<span class="name">defparameter</span> *object-locations* '((whiskey living-room)</div><div class="line">                                   (bucket living-room)</div><div class="line">                                   (chain garden)</div><div class="line">                                   (frog garden)))</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">;; One Way to write OBJECTS-AT function</span></div><div class="line"></div><div class="line"><span class="comment">;; (defun object-at-location-p (object location object-locations)</span></div><div class="line"><span class="comment">;;   "object and location are symbols.</span></div><div class="line"><span class="comment">;; object-locations is a global variable"</span></div><div class="line"><span class="comment">;;   (eq (cadr (assoc object object-locations))</span></div><div class="line"><span class="comment">;;       location))</span></div><div class="line"></div><div class="line"><span class="comment">;; if the test function in REMOVE-IF-NOT require more than one</span></div><div class="line"><span class="comment">;; arguments, then use a lambda to wrap the function. ;-)</span></div><div class="line"></div><div class="line"><span class="comment">;; (defun objects-at (location objects object-locations)</span></div><div class="line"><span class="comment">;;   (remove-if-not #'(lambda (object)</span></div><div class="line"><span class="comment">;;                      (object-at-location-p object</span></div><div class="line"><span class="comment">;;                                            location</span></div><div class="line"><span class="comment">;;                                            object-locations))</span></div><div class="line"><span class="comment">;;                  objects))</span></div><div class="line"></div><div class="line"><span class="comment">;; A better way for OBJECTS-AT function</span></div><div class="line">(<span class="name">defun</span> objects-at (<span class="name">location</span> objects object-locations)</div><div class="line">  <span class="string">"location is a symbol.</span></div><div class="line">objects and object-locations are global variables.</div><div class="line">return a list of objects in the current location."</div><div class="line">  (<span class="name">labels</span> ((<span class="name">at-location-p</span> (<span class="name">object</span>)</div><div class="line">             (<span class="name">eq</span> location</div><div class="line">                 (<span class="name">cadr</span> (<span class="name">assoc</span> object object-locations)))))</div><div class="line">    (<span class="name">remove-if-not</span> #'at-location-p objects)))</div><div class="line"></div><div class="line">(<span class="name">defun</span> describe-objects (<span class="name">location</span> objects object-locations)</div><div class="line">  <span class="string">"location is a symbol.</span></div><div class="line">objects and object-locations are global variables."</div><div class="line">  (<span class="name">apply</span> #'append</div><div class="line">         (<span class="name">mapcar</span> #'(lambda (object)</div><div class="line">                     `(you see a ,object on the floor.))</div><div class="line">                 (<span class="name">objects-at</span> location objects</div><div class="line">                             object-locations))))</div><div class="line"></div><div class="line"><span class="comment">;; ====================</span></div><div class="line"><span class="comment">;; Describing it ALL</span></div><div class="line"></div><div class="line">(<span class="name">defparameter</span> *location* 'living-room)</div><div class="line"></div><div class="line">(<span class="name">defun</span> look ()</div><div class="line">  (<span class="name">append</span> (<span class="name">describe-location</span> *location* *nodes*)</div><div class="line">          (<span class="name">describe-paths</span> *location* *edges*)</div><div class="line">          (<span class="name">describe-objects</span> *location* *objects*</div><div class="line">                            *object-locations*)))</div><div class="line"></div><div class="line"><span class="comment">;; Walking Around in Our World</span></div><div class="line">(<span class="name">defun</span> walk (<span class="name">direction</span>)</div><div class="line">  (<span class="name">let</span> ((<span class="name">next</span></div><div class="line">          (<span class="name">find</span> direction</div><div class="line">                (<span class="name">cdr</span> (<span class="name">assoc</span> *location* *edges*))</div><div class="line">                <span class="symbol">:key</span> #'cadr)))</div><div class="line">    (<span class="name">cond</span> (<span class="name">next</span></div><div class="line">           (<span class="name">setf</span> *location* (<span class="name">car</span> next))</div><div class="line">           (<span class="name">look</span>))</div><div class="line">          (<span class="name">t</span></div><div class="line">           '(you cannot go that way.)))))</div><div class="line"></div><div class="line"><span class="comment">;; ====================</span></div><div class="line"><span class="comment">;; Pick Up Objects</span></div><div class="line"></div><div class="line">(<span class="name">defun</span> pickup (<span class="name">object</span>)</div><div class="line">  <span class="string">"object is a symbol.</span></div><div class="line">push a new list to *object-locations*, return a message list"</div><div class="line">  (<span class="name">cond</span> ((<span class="name">member</span></div><div class="line">          object</div><div class="line">          (<span class="name">objects-at</span> *location* *objects*</div><div class="line">                      *object-locations*))</div><div class="line">         (<span class="name">push</span> `(,object body) *object-locations*)</div><div class="line">         `(you are now carrying the ,object))</div><div class="line">        (<span class="name">t</span> '(you cannot get that.))))</div><div class="line"></div><div class="line"><span class="comment">;; ====================</span></div><div class="line"><span class="comment">;; Checking Our Inventory</span></div><div class="line"></div><div class="line">(<span class="name">defun</span> inventory ()</div><div class="line">  (<span class="name">cons</span> 'items- (<span class="name">objects-at</span> 'body *objects* *object-locations*)))</div><div class="line"></div><div class="line">(<span class="name">defun</span> game-read ()</div><div class="line">  (<span class="name">let</span> ((<span class="name">cmd</span></div><div class="line">          (<span class="name">read-from-string</span></div><div class="line">           (<span class="name">concatenate</span> 'string <span class="string">"("</span> (<span class="name">read-line</span>) <span class="string">")"</span>))))</div><div class="line">    (<span class="name">cons</span> (<span class="name">car</span> cmd)</div><div class="line">          (<span class="name">mapcar</span> #'(lambda (x)</div><div class="line">                      `',x)</div><div class="line">                  (<span class="name">cdr</span> cmd)))))</div><div class="line"></div><div class="line">(<span class="name">defun</span> tweak-text (<span class="name">lst</span> capital-p literal-p)</div><div class="line">  (<span class="name">let</span> ((<span class="name">item</span> (<span class="name">car</span> lst))</div><div class="line">        (<span class="name">rest</span> (<span class="name">rest</span> lst)))</div><div class="line">    (<span class="name">if</span> item</div><div class="line">        (<span class="name">cond</span> ((<span class="name">member</span> item '(#\! #\? #\.))</div><div class="line">               (<span class="name">cons</span> item (<span class="name">tweak-text</span> rest <span class="literal">t</span> <span class="literal">nil</span>)))</div><div class="line">              ((<span class="name">eq</span> item #\<span class="string">")</span></div><div class="line">               (cons item (tweak-text rest nil (not literal-p))))</div><div class="line">              (literal-p</div><div class="line">               (cons item (tweak-text rest nil literal-p)))</div><div class="line">              (capital-p</div><div class="line">               (cons (char-upcase item)</div><div class="line">                     (if (alpha-char-p item)</div><div class="line">                         (tweak-text rest nil literal-p)</div><div class="line">                         (tweak-text rest t literal-p))))</div><div class="line">              (t</div><div class="line">               (cons (char-downcase item)</div><div class="line">                     (tweak-text rest nil literal-p)))))))</div><div class="line"></div><div class="line">(defun game-print (lst)</div><div class="line">  (princ</div><div class="line">   (coerce</div><div class="line">    (tweak-text</div><div class="line">     (coerce (string-trim "() <span class="string">"</span></div><div class="line">                          (prin1-to-string lst))</div><div class="line">             'list)</div><div class="line">     t nil)</div><div class="line">    'string))</div><div class="line">  (fresh-line))</div><div class="line"></div><div class="line">(defparameter *allowed-commands* '(look walk pickup inventory))</div><div class="line"></div><div class="line">(defun game-eval (sexp)</div><div class="line">  (if (member (first sexp)</div><div class="line">              *allowed-commands*)</div><div class="line">      (eval sexp)</div><div class="line">      '(i do not know that command.)))</div><div class="line"></div><div class="line">(defun game-repl ()</div><div class="line">  (let ((cmd (game-read)))</div><div class="line">    (unless (eq (car cmd)</div><div class="line">                'quit)</div><div class="line">      (game-print (game-eval cmd))</div><div class="line">      (game-repl))))</div></pre></td></tr></table></figure>
<p>在第七章里，把游戏里面的位置位置关系通过有向图的形式用第三方库画出来：</p>
<p><img src="/img/wizard.png" alt="adventure game world"></p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line"><span class="comment">;; 2016/08/01 11:48:58 AM</span></div><div class="line"><span class="comment">;; Xueyang Liu</span></div><div class="line"></div><div class="line">(<span class="name">defparameter</span> *wizard-nodes*</div><div class="line">  '((living-room (you are in the living-room.</div><div class="line">                  a wizard is snoring loudly on the couch.))</div><div class="line">    (garden (you are in a beautiful garden.</div><div class="line">             there is a well in front of you.))</div><div class="line">    (attic (you are in the attic.</div><div class="line">            there is a giant welding torch in the corner.))))</div><div class="line"></div><div class="line">(<span class="name">defparameter</span> *wizard-edges*</div><div class="line">  '((living-room</div><div class="line">     (garden west door)</div><div class="line">     (attic upstairs ladder))</div><div class="line">    (garden</div><div class="line">     (living-room east door))</div><div class="line">    (attic</div><div class="line">     (living-room downstairs ladder))))</div><div class="line"></div><div class="line">(<span class="name">defun</span> dot-name (<span class="name">sexp</span>)</div><div class="line">  (<span class="name">string-downcase</span></div><div class="line">   (<span class="name">substitute-if</span> #\_ (<span class="name">complement</span> #'alphanumericp)</div><div class="line">                  (<span class="name">prin1-to-string</span> sexp))))</div><div class="line"></div><div class="line">(<span class="name">defparameter</span> *max-label-length* <span class="number">30</span>)</div><div class="line"></div><div class="line">(<span class="name">defun</span> dot-label (<span class="name">sexp</span>)</div><div class="line">  (<span class="name">if</span> sexp</div><div class="line">      (<span class="name">let</span> ((<span class="name">s</span> (<span class="name">write-to-string</span> sexp</div><div class="line">                                <span class="symbol">:pretty</span> <span class="literal">nil</span>)))</div><div class="line">        (<span class="name">if</span> (<span class="name">&gt;</span> (<span class="name">length</span> s)</div><div class="line">               *max-label-length*)</div><div class="line">            (<span class="name">concatenate</span> 'string</div><div class="line">                         (<span class="name">string-downcase</span></div><div class="line">                          (<span class="name">subseq</span> s</div><div class="line">                                  <span class="number">0</span> (<span class="name">-</span> *max-label-length* <span class="number">3</span>)))</div><div class="line">                         <span class="string">"..."</span>)</div><div class="line">            s))</div><div class="line">      <span class="string">""</span>))</div><div class="line"></div><div class="line">(<span class="name">defun</span> nodes-&gt;dot (<span class="name">nodes</span>)</div><div class="line">  (<span class="name">mapc</span> (<span class="name">lambda</span> (<span class="name">sexp</span>)</div><div class="line">          (<span class="name">fresh-line</span>)</div><div class="line">          (<span class="name">princ</span> (<span class="name">dot-name</span> (<span class="name">car</span> sexp)))</div><div class="line">          (<span class="name">princ</span> <span class="string">"[label=\""</span>)</div><div class="line">          (<span class="name">princ</span> (<span class="name">dot-label</span> sexp))</div><div class="line">          (<span class="name">princ</span> <span class="string">"\"];"</span>))</div><div class="line">        nodes))</div><div class="line"></div><div class="line">(<span class="name">defun</span> edges-&gt;dot (<span class="name">edges</span>)</div><div class="line">  (<span class="name">mapc</span> (<span class="name">lambda</span> (<span class="name">node</span>)</div><div class="line">          (<span class="name">mapc</span> (<span class="name">lambda</span> (<span class="name">edge</span>)</div><div class="line">                  (<span class="name">fresh-line</span>)</div><div class="line">                  (<span class="name">princ</span> (<span class="name">dot-name</span> (<span class="name">car</span> node)))</div><div class="line">                  (<span class="name">princ</span> <span class="string">"-&gt;"</span>)</div><div class="line">                  (<span class="name">princ</span> (<span class="name">dot-name</span> (<span class="name">car</span> edge)))</div><div class="line">                  (<span class="name">princ</span> <span class="string">"[label=\""</span>)</div><div class="line">                  (<span class="name">princ</span> (<span class="name">string-downcase</span></div><div class="line">                          (<span class="name">prin1-to-string</span> (<span class="name">cdr</span> edge))))</div><div class="line">                  (<span class="name">princ</span> <span class="string">"\"];"</span>))</div><div class="line">                (<span class="name">cdr</span> node)))</div><div class="line">        edges))</div><div class="line"></div><div class="line">(<span class="name">defun</span> uedges-&gt;dot (<span class="name">edges</span>)</div><div class="line">  (<span class="name">maplist</span> (<span class="name">lambda</span> (<span class="name">lst</span>)</div><div class="line">             (<span class="name">mapc</span> (<span class="name">lambda</span> (<span class="name">edge</span>)</div><div class="line">                     (<span class="name">unless</span> (<span class="name">assoc</span> (<span class="name">car</span> edge)</div><div class="line">                                    lst)</div><div class="line">                       (<span class="name">fresh-line</span>)</div><div class="line">                       (<span class="name">princ</span> (<span class="name">dot-name</span> (<span class="name">caar</span> lst)))</div><div class="line">                       (<span class="name">princ</span> <span class="string">"--"</span>)</div><div class="line">                       (<span class="name">princ</span> (<span class="name">dot-name</span> (<span class="name">car</span> edge)))</div><div class="line">                       (<span class="name">princ</span> <span class="string">"[label=\""</span>)</div><div class="line">                       (<span class="name">princ</span> (<span class="name">string-downcase</span></div><div class="line">                               (<span class="name">prin1-to-string</span> (<span class="name">cdr</span> edge))))</div><div class="line">                       (<span class="name">princ</span> <span class="string">"\"];"</span>)))</div><div class="line">                   (<span class="name">cdar</span> lst)))</div><div class="line">           edges))</div><div class="line"></div><div class="line">(<span class="name">defun</span> graph-&gt;dot (<span class="name">nodes</span> edges)</div><div class="line">  (<span class="name">princ</span> <span class="string">"digraph&#123;"</span>)</div><div class="line">  (<span class="name">nodes-&gt;dot</span> nodes)</div><div class="line">  (<span class="name">edges-&gt;dot</span> edges)</div><div class="line">  (<span class="name">princ</span> <span class="string">"&#125;"</span>))</div><div class="line"></div><div class="line">(<span class="name">defun</span> ugraph-&gt;dot (<span class="name">nodes</span> edges)</div><div class="line">  (<span class="name">princ</span> <span class="string">"graph&#123;"</span>)</div><div class="line">  (<span class="name">nodes-&gt;dot</span> nodes)</div><div class="line">  (<span class="name">uedges-&gt;dot</span> edges)</div><div class="line">  (<span class="name">princ</span> <span class="string">"&#125;"</span>))</div><div class="line"></div><div class="line">(<span class="name">defun</span> dot-&gt;png (<span class="name">fname</span> thunk)</div><div class="line">  (<span class="name">with-open-file</span> (<span class="name">*standard-output*</span></div><div class="line">                   fname</div><div class="line">                   <span class="symbol">:direction</span> <span class="symbol">:output</span></div><div class="line">                   <span class="symbol">:if-exists</span> <span class="symbol">:supersede</span>)</div><div class="line">    (<span class="name">funcall</span> thunk))</div><div class="line">  (<span class="name">ext</span><span class="symbol">:shell</span> (<span class="name">concatenate</span> 'string</div><div class="line">                          <span class="string">"dot -Tpng -O "</span> fname)))</div><div class="line"></div><div class="line">(<span class="name">defun</span> graph-&gt;png (<span class="name">fname</span> nodes edges)</div><div class="line">  (<span class="name">dot-&gt;png</span> fname</div><div class="line">            (<span class="name">lambda</span> ()</div><div class="line">              (<span class="name">graph-&gt;dot</span> nodes edges))))</div><div class="line"></div><div class="line">(<span class="name">defun</span> ugraph-&gt;png (<span class="name">fname</span> nodes edges)</div><div class="line">  (<span class="name">dot-&gt;png</span> fname</div><div class="line">            (<span class="name">lambda</span> ()</div><div class="line">              (<span class="name">ugraph-&gt;dot</span> nodes edges))))</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/07/31/2016-07-31-17-43-50-PM-杂事/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/31/2016-07-31-17-43-50-PM-杂事/" itemprop="url">
                  2016/07/31 17:43:50 PM 杂事
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-31T17:44:00+08:00">
                2016-07-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这两天开始重新读 <em>Land of LISP</em> 这本书，之前只读到了第六章，这次重头开始复习一遍，<br>发现这本书写的挺有意思，循序渐进，并且也特别有趣。目前的节奏是每天读一章到两章的<br>样子。我买的是原版的英文书，读书的过程中体会到，纸质书的质量对阅读心情特别重要！<br>好的书就让人有阅读欲望，甚至愿意经常抱着它读，看完也会收藏起来，国外的书那么贵其<br>实也有道理，书的质量好啊……然而国内的很多引进的计算机的书虽然卖的便宜，然而质量并<br>不能和人家比。。</p>
<p>写LISP的时候一直都用Spacemacs，然后我现在变得也日常用Emacs了……除非临时在终端配置<br>个文件什么的懒得打开Emacs还得忍受它缓慢的启动速度，这种时候我依然是用Vim愉快地解<br>决问题。其它时候，用Emacs的org-mode写文档、写博客、写程序之类的，全在Emacs里面完<br>成。生活变得轻松了许多 :joy:</p>
<p>夏天来了，下午经常犯困，睡好久……下午战斗力骤减，不过也好，睡醒了精神了之后，看书<br>也变得更愉快 :joy:</p>
<p>TeXmacs其实对于英文文档的书写来说，蛮不错的，写公式、创建表格什么的都很方便，然<br>而对与中文来说，就是个坑了……并且，在Mac里面，经！常！闪！退！真是醉了。看来关键<br>时候，还是不能偷懒，中文还是老老实实LaTeX加ctex之类的宏包吧 :joy:</p>
<p>之前学会了双拼之后，日常就用双拼输入法，越来越觉得，这货真是好东西，希望用全拼的<br>每个人都能有机会尝试一下，我用的是Rime的小鹤双拼。Spacemacs对像我这种的Emacs小白<br>用户来说真是福音啊！对我来说，这就是完美的配置，避免了自己配置、然后推翻自己的配<br>置、然后重新配置、插件之间有冲突之类的这些坑。如果早早用上Spacemacs可能会省下不<br>少时间吧。</p>
<p>哦，最近，把哈利波特系列电影除了最后一部混血王子全部看了一遍，唉，挺遗憾的吧，我<br>记得小学的时候只买了哈利波特与混血王子那本书，如果当时看的是第一部的话，可能就不<br>一样了吧。。</p>
<p>说出来可能有点残酷，你是什么样的人，你有过什么样的经历，你做过什么样的事情，你就<br>会产生什么样的偏见，你就会成会什么样的人。。。这一点，我似乎有了进一步体会。。</p>
<p>为了节省时间，还是少刷B站。。</p>
<p>做事情，还是要善始善终，靠谱一点。惭愧。 :cry:</p>
<p>七月的最后一天，随意写写。说起七月，突然想起<br><a href="http://music.163.com/#/song?id=31445554" target="_blank" rel="external">七月上</a>这首歌</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/07/26/spoj-segment-tree-KGSS-Maximum-Sum/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/26/spoj-segment-tree-KGSS-Maximum-Sum/" itemprop="url">
                  spoj, segment tree: KGSS - Maximum Sum
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-26T08:58:52+08:00">
                2016-07-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.spoj.com/problems/KGSS/" target="_blank" rel="external">Problem Link</a></p>
<p>每个节点保存三个值：区间的最大值，区间的第二大值，区间的最大的两个数的和</p>
<p>平常的区间的点更新和区间查询</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 2016/07/25 19:29:33 PM</span></div><div class="line"><span class="comment">// Sabastian</span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> TreeNode &#123;</div><div class="line">  <span class="keyword">int</span> start, end;</div><div class="line">  <span class="keyword">int</span> Max, SecMax, sum;</div><div class="line"></div><div class="line">  TreeNode()</div><div class="line">    : SecMax(<span class="number">-1</span>) &#123;&#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(TreeNode &amp; left, TreeNode &amp; right)</span> </span>&#123;</div><div class="line">    sum = max(left.sum, max(right.sum, left.Max + right.Max));</div><div class="line">    Max = max(left.Max, right.Max);</div><div class="line">    SecMax = min(left.Max, right.Max);</div><div class="line">  &#125;</div><div class="line">&#125; TreeNode;</div><div class="line"></div><div class="line">TreeNode tree[<span class="number">4</span> * <span class="number">100000</span> + <span class="number">10</span>];</div><div class="line">ll a[<span class="number">4</span> * <span class="number">100000</span> + <span class="number">10</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> stIndex, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printNode</span><span class="params">(<span class="keyword">int</span> stIndex)</span> </span>&#123;</div><div class="line">  TreeNode &amp;t = tree[stIndex];</div><div class="line">  <span class="built_in">printf</span>(<span class="string">"%d (%d, %d), total=%d\n"</span>, stIndex, t.start, t.end, t.sum);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> stIndex, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">  TreeNode &amp; t = tree[stIndex];</div><div class="line"></div><div class="line">  t.start = start;</div><div class="line">  t.end = end;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (start == end) &#123;</div><div class="line">    t.sum = t.Max = a[start];</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (start &gt; end) &#123;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">int</span> mid = (start + end) / <span class="number">2</span>, leftChildIndex = stIndex * <span class="number">2</span>,</div><div class="line">      rightChildIndex = leftChildIndex + <span class="number">1</span>;</div><div class="line"></div><div class="line">  build(leftChildIndex, start, mid);</div><div class="line">  build(rightChildIndex, mid + <span class="number">1</span>, end);</div><div class="line"></div><div class="line">  t.merge(tree[leftChildIndex], tree[rightChildIndex]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> stIndex, <span class="keyword">int</span> index, <span class="keyword">int</span> value)</span> </span>&#123;</div><div class="line">  TreeNode &amp;t = tree[stIndex];</div><div class="line"></div><div class="line">  <span class="comment">// printf("(%d,%d), %d\n", t.start, t.end, index);</span></div><div class="line">  <span class="keyword">if</span> (index == t.start &amp;&amp; index == t.end) &#123;</div><div class="line">    t.sum = t.Max = value;</div><div class="line">    t.SecMax = <span class="number">-1</span>;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// node contain is contained in [start..end]</span></div><div class="line">  <span class="keyword">int</span> leftChildIndex = stIndex * <span class="number">2</span>, rightChildIndex = leftChildIndex + <span class="number">1</span>,</div><div class="line">      mid = (t.start + t.end) / <span class="number">2</span>;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (index &gt; mid) &#123;</div><div class="line">    update(rightChildIndex, index, value);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    update(leftChildIndex, index, value);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  t.merge(tree[leftChildIndex], tree[rightChildIndex]);</div><div class="line"></div><div class="line">  <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">TreeNode <span class="title">query</span><span class="params">(<span class="keyword">int</span> stIndex, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">  TreeNode t = tree[stIndex];</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (start == t.start &amp;&amp; end == t.end) &#123;</div><div class="line">    <span class="keyword">return</span> t;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// node contain is contained in [start..end]</span></div><div class="line">  <span class="keyword">int</span> leftChildIndex = stIndex * <span class="number">2</span>, rightChildIndex = leftChildIndex + <span class="number">1</span>,</div><div class="line">      mid = (t.start + t.end) / <span class="number">2</span>;</div><div class="line">  TreeNode result;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (start &gt; mid) &#123;</div><div class="line">    <span class="keyword">return</span> query(rightChildIndex, start, end);</div><div class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (end &lt;= mid) &#123;</div><div class="line">    <span class="keyword">return</span> query(leftChildIndex, start, end);</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    TreeNode left = query(leftChildIndex, start, mid),</div><div class="line">      right = query(rightChildIndex, mid + <span class="number">1</span>, end);</div><div class="line">    result.merge(left, right);</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line">  <span class="keyword">int</span> N, M;</div><div class="line"></div><div class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;N);</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; ++i) &#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;a[i]);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  build(<span class="number">1</span>, <span class="number">0</span>, N - <span class="number">1</span>);</div><div class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;M);</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">1</span>; m &lt;= M; ++m) &#123;</div><div class="line">    <span class="keyword">int</span> x, y;</div><div class="line">    <span class="keyword">char</span> i[<span class="number">10</span>];</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%s%d%d"</span>, i, &amp;x, &amp;y);</div><div class="line"></div><div class="line">    x--;</div><div class="line">    <span class="keyword">if</span> (i[<span class="number">0</span>] == <span class="string">'Q'</span>) &#123;</div><div class="line">      y--;</div><div class="line">      <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(<span class="number">1</span>, x, y).sum);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      update(<span class="number">1</span>, x, y);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="liuxueyang.github.io/2016/07/25/spoj-segment-tree-HORRIBLE-Horrible-Queries/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="liuxueyang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="黑历史">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/25/spoj-segment-tree-HORRIBLE-Horrible-Queries/" itemprop="url">
                  spoj, segment tree: HORRIBLE - Horrible Queries
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-25T23:25:39+08:00">
                2016-07-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.spoj.com/problems/HORRIBLE/" target="_blank" rel="external">Problem Link</a></p>
<p>平常的线段树区间更新和区间查询</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 2016/07/22 14:38:03 PM</span></div><div class="line"><span class="comment">// Sabastian</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> TreeNode &#123;</div><div class="line">  <span class="keyword">int</span> start, end;</div><div class="line">  ll total;</div><div class="line">  ll lazy;</div><div class="line">&#125; TreeNode;</div><div class="line"></div><div class="line">TreeNode tree[<span class="number">4</span> * <span class="number">100000</span> + <span class="number">10</span>];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printNode</span><span class="params">(<span class="keyword">int</span> stIndex)</span> </span>&#123;</div><div class="line">  TreeNode &amp;t = tree[stIndex];</div><div class="line">  <span class="built_in">printf</span>(<span class="string">"(%d, %d), lazy=%lld, total=%lld\n"</span>,</div><div class="line">         t.start, t.end, t.lazy, t.total);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> stIndex, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">  tree[stIndex].start = start;</div><div class="line">  tree[stIndex].end = end;</div><div class="line">  tree[stIndex].total = <span class="number">0</span>;</div><div class="line">  tree[stIndex].lazy = <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (start == end) &#123;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">int</span> mid = (start + end) / <span class="number">2</span>, leftChildIndex = stIndex * <span class="number">2</span>,</div><div class="line">    rightChildIndex = leftChildIndex + <span class="number">1</span>;</div><div class="line">  build(leftChildIndex, start, mid);</div><div class="line">  build(rightChildIndex, mid + <span class="number">1</span>, end);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">UpdateNode</span><span class="params">(<span class="keyword">int</span> stIndex, TreeNode &amp; t, ll value)</span> </span>&#123;</div><div class="line">  <span class="keyword">bool</span> isLeaf = (t.start == t.end);</div><div class="line"></div><div class="line">  t.total += (t.end - t.start + <span class="number">1</span>) * value;</div><div class="line">  <span class="keyword">if</span> (!isLeaf) &#123;</div><div class="line">    tree[stIndex * <span class="number">2</span>].lazy += value;</div><div class="line">    tree[stIndex * <span class="number">2</span> + <span class="number">1</span>].lazy += value;</div><div class="line">  &#125;</div><div class="line">  t.lazy = <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> stIndex, <span class="keyword">int</span> start, <span class="keyword">int</span> end, ll value)</span> </span>&#123;</div><div class="line">  TreeNode &amp; t = tree[stIndex];</div><div class="line"></div><div class="line">  <span class="comment">// needs updated</span></div><div class="line">  <span class="keyword">if</span> (t.lazy) &#123;</div><div class="line">    UpdateNode(stIndex, t, t.lazy);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (start &gt; t.end || end &lt; t.start || start &gt; end) &#123;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// node contain is contained in [start..end]</span></div><div class="line">  <span class="keyword">if</span> (t.start &gt;= start &amp;&amp; t.end &lt;= end) &#123;</div><div class="line">    UpdateNode(stIndex, t, value);</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">int</span> leftChildIndex = stIndex * <span class="number">2</span>, rightChildIndex = leftChildIndex + <span class="number">1</span>;</div><div class="line"></div><div class="line">  update(leftChildIndex, start, end, value);</div><div class="line">  update(rightChildIndex, start, end, value);</div><div class="line">  t.total = tree[leftChildIndex].total + tree[rightChildIndex].total;</div><div class="line"></div><div class="line">  <span class="keyword">return</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> stIndex, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">  TreeNode &amp; t = tree[stIndex];</div><div class="line"></div><div class="line">  <span class="comment">// needs updated</span></div><div class="line">  <span class="keyword">if</span> (t.lazy) &#123;</div><div class="line">    UpdateNode(stIndex, t, t.lazy);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (start &gt; t.end || end &lt; t.start || start &gt; end) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// node contain is contained in [start..end]</span></div><div class="line">  <span class="keyword">if</span> (t.start &gt;= start &amp;&amp; t.end &lt;= end) &#123;</div><div class="line">    <span class="keyword">return</span> t.total;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">int</span> leftChildIndex = stIndex * <span class="number">2</span>, rightChildIndex = leftChildIndex + <span class="number">1</span>;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> query(leftChildIndex, start, end) +</div><div class="line">    query(rightChildIndex, start, end);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</div><div class="line">  <span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></div><div class="line">  freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</div><div class="line">  <span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line">  <span class="keyword">int</span> T, N, C;</div><div class="line"></div><div class="line">  <span class="built_in">cin</span> &gt;&gt; T;</div><div class="line">  <span class="keyword">while</span> (T--) &#123;</div><div class="line">    <span class="built_in">cin</span> &gt;&gt; N &gt;&gt; C;</div><div class="line">    build(<span class="number">1</span>, <span class="number">0</span>, N - <span class="number">1</span>);</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (C--) &#123;</div><div class="line">      <span class="keyword">int</span> op, p, q;</div><div class="line">      <span class="comment">// you must declare v as long long, or it will WA.</span></div><div class="line">      <span class="comment">// Problem says: v &lt;= 10^7, don't know why...</span></div><div class="line">      ll v;</div><div class="line"></div><div class="line">      <span class="built_in">cin</span> &gt;&gt; op;</div><div class="line">      <span class="keyword">if</span> (op) &#123;</div><div class="line">        <span class="comment">// query</span></div><div class="line">        <span class="built_in">cin</span> &gt;&gt; p &gt;&gt; q;</div><div class="line">        p--; q--;</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; query(<span class="number">1</span>, p, q) &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">cin</span> &gt;&gt; p &gt;&gt; q &gt;&gt; v;</div><div class="line">        p--; q--;</div><div class="line">        update(<span class="number">1</span>, p, q, v);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/46/">46</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="liuxueyang" />
          <p class="site-author-name" itemprop="name">liuxueyang</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">455</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">Kategorien</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">53</span>
                <span class="site-state-item-name">Tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liuxueyang</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  








  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
